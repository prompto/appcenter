{"version":3,"sources":["webpack://ResourceEditors/webpack/bootstrap","webpack://ResourceEditors/./src/code/CodeUtils.js","webpack://ResourceEditors/./node_modules/axios/lib/utils.js","webpack://ResourceEditors/./src/code/Catalog.js","webpack://ResourceEditors/./node_modules/axios/index.js","webpack://ResourceEditors/(webpack)/buildin/global.js","webpack://ResourceEditors/./src/code/Delta.js","webpack://ResourceEditors/./node_modules/axios/lib/helpers/bind.js","webpack://ResourceEditors/./node_modules/axios/lib/helpers/buildURL.js","webpack://ResourceEditors/./node_modules/axios/lib/cancel/isCancel.js","webpack://ResourceEditors/./node_modules/axios/lib/defaults.js","webpack://ResourceEditors/./node_modules/axios/lib/adapters/xhr.js","webpack://ResourceEditors/./node_modules/axios/lib/core/createError.js","webpack://ResourceEditors/./node_modules/axios/lib/core/mergeConfig.js","webpack://ResourceEditors/./node_modules/axios/lib/cancel/Cancel.js","webpack://ResourceEditors/./src/code/Repository.js","webpack://ResourceEditors/./src/worker/Globals.js","webpack://ResourceEditors/./node_modules/axios/lib/axios.js","webpack://ResourceEditors/./node_modules/axios/lib/core/Axios.js","webpack://ResourceEditors/./node_modules/axios/lib/core/InterceptorManager.js","webpack://ResourceEditors/./node_modules/axios/lib/core/dispatchRequest.js","webpack://ResourceEditors/./node_modules/axios/lib/core/transformData.js","webpack://ResourceEditors/./node_modules/process/browser.js","webpack://ResourceEditors/./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://ResourceEditors/./node_modules/axios/lib/core/settle.js","webpack://ResourceEditors/./node_modules/axios/lib/core/enhanceError.js","webpack://ResourceEditors/./node_modules/axios/lib/helpers/cookies.js","webpack://ResourceEditors/./node_modules/axios/lib/core/buildFullPath.js","webpack://ResourceEditors/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://ResourceEditors/./node_modules/axios/lib/helpers/combineURLs.js","webpack://ResourceEditors/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://ResourceEditors/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://ResourceEditors/./node_modules/axios/lib/cancel/CancelToken.js","webpack://ResourceEditors/./node_modules/axios/lib/helpers/spread.js","webpack://ResourceEditors/./src/ace/EventEmitter.js","webpack://ResourceEditors/./src/ace/Range.js","webpack://ResourceEditors/./src/ace/Anchor.js","webpack://ResourceEditors/./src/ace/Document.js","webpack://ResourceEditors/./src/code/Defaults.js","webpack://ResourceEditors/./src/utils/Fetcher.js","webpack://ResourceEditors/./src/runner/LocalInterpreter.js","webpack://ResourceEditors/./src/runner/Runner.js","webpack://ResourceEditors/./src/worker/PromptoWorker.js","webpack://ResourceEditors/./src/ace/Mirror.js","webpack://ResourceEditors/./src/ace/lang.js","webpack://ResourceEditors/./src/worker/PromptoWorkerThread.js","webpack://ResourceEditors/./src/ace/Sender.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","globals","global","self","newParser","input","dialect","listener","parser","klass","prompto","removeErrorListeners","addErrorListener","parse","decls","forEach","decl","sourceCode","body","fetchBody","unparse","context","Dialect","writer","utils","CodeWriter","newChildContext","problemListener","problem","ProblemCollector","comments","cmt","toDialect","annotations","ann","toString","translate","data","from","to","sortBy","a","f","sort","i1","i2","getCodebaseLength","codebase","length","Array","isArray","convertDocumentToObject","recursivelyConvertDocumentToObject","map","result","type","getOwnPropertyNames","this","convertObjectToDocument","recursivelyConvertObjectToDocument","val","isUndefined","isObject","isPlainObject","getPrototypeOf","isFunction","obj","fn","isArrayBuffer","isBuffer","constructor","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","window","document","merge","assignValue","slice","arguments","extend","b","thisArg","trim","str","replace","stripBOM","content","charCodeAt","Catalog","globalContext","filterContext","linkPrompto","readCatalog","filterOutDeclarations","loadCatalog","attributes","categories","enumerations","methods","tests","widgets","runtime","Context","newGlobalsContext","register","catalog","getLocalCatalog","filterOutObjects","filterOutMethods","filter","contextForDeclaration","method","filterOutMethod","protos","getRegisteredDeclaration","proto","hasPrototype","g","Function","e","Delta","removed","added","getContent","getFirstAdded","list","entry","filterOutDuplicates","filterOutDuplicatesInField","field","filterOutDuplicatesInLists","filterOutDuplicatesInMethods","j","va","vb","splice","adjustForMovingProtos","keys","isModifiedProto","adjustMethodForRemovedProtos","adjustMethodForAddedProtos","proto_to_remove","push","proto_to_add","findPreExistingProto","proto_to_move","main","isEligibleAsMain","findOrCreateMethod","found","adjustMethodForRemovedProto","current","created","args","apply","encode","encodeURIComponent","url","params","paramsSerializer","serializedParams","parts","v","toISOString","JSON","stringify","join","hashmarkIndex","indexOf","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","headers","adapter","defaults","XMLHttpRequest","process","transformRequest","transformResponse","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","status","common","settle","cookies","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","config","Promise","resolve","reject","requestData","requestHeaders","request","auth","username","password","unescape","Authorization","btoa","fullPath","baseURL","open","toUpperCase","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","response","responseType","responseText","statusText","onabort","onerror","ontimeout","timeoutErrorMessage","xsrfValue","withCredentials","read","undefined","toLowerCase","setRequestHeader","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","then","cancel","abort","send","enhanceError","message","code","error","Error","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","directMergeKeys","getMergedValue","target","source","mergeDeepProperties","prop","axiosKeys","concat","otherKeys","Cancel","Repository","librariesContext","projectContext","setParentContext","lastSuccess","declaration","DeclarationList","statuses","reset","registerLibraryCode","registerLibraryDeclarations","declarations","clearLibrariesContext","publishLibraries","getCatalog","library","publishProject","project","unpublishProject","delta","registerProjectDeclarations","progress","totalCount","actualCount","dependencies","image","registerClean","getContentBody","getDeclaration","getDeclarationBody","getRegisteredTest","methodsMap","getFirst","idFromDbDecl","dbDecl","idFromContent","idFromDecl","getProto","id","resource","editStatus","registerDestroyed","obj_status","registerDirty","decl_obj","existing","storable","symbols","derivedFrom","version","dbId","getDeclarationType","markChangesCommitted","storedDecls","storedDecl","clearDeleted","deleted","getEditedDeclarations","contents","handleDestroyed","unregister","handleSetContent","doHandleSetContent","handleUnhandled","child","pushProblemListener","check","popProblemListener","handleEditContent","selected","doHandleEditContent","problems","collectProblem","startLine","startColumn","endLine","endColumn","old_decls","new_decls","checkDuplicates","updateCodebase","$delta","editedCount","newContent","some","isDuplicate","reportDuplicate","old","MethodDeclarationMap","BaseMethodDeclaration","hasProto","changedIdsCount","handled","updateRenamed","updateAppContext","decls_with_status","new_decl","new_id","new_status","orphan_decls","old_decl","old_id","old_status","saved_listener","contentForStackFrame","stackFrame","categoryName","categoryForStackFrame","methodForStackFrame","typeFromDeclaration","AttributeDeclaration","CategoryDeclaration","isWidget","EnumeratedCategoryDeclaration","EnumeratedNativeDeclaration","TestMethodDeclaration","methodName","methodProto","createBreakpointAtLine","line","creator","createBreakpointAtMethodLine","createBreakpointAtTestLine","createBreakpointAtCategoryLine","brkpt","section","locateSectionAtLine","statementLine","startLocation","assign","methodLine","locateSection","breakpoint","serialize","path","computeValuePath","typeName","valueName","protoName","memberOf","Honey","importScripts","logDebug","console","log","warn","trace","postMessage","AnnotatingErrorListener","pc","row","column","endRow","text","Axios","mergeConfig","createInstance","defaultConfig","instance","axios","instanceConfig","CancelToken","isCancel","all","promises","spread","default","InterceptorManager","dispatchRequest","interceptors","chain","interceptor","unshift","fulfilled","rejected","shift","getUri","handlers","use","eject","h","transformData","throwIfCancellationRequested","throwIfRequested","reason","fns","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","len","run","marker","runClearTimeout","Item","array","noop","nextTick","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","normalizedName","isAxiosError","toJSON","description","number","fileName","lineNumber","columnNumber","stack","write","expires","domain","secure","cookie","Date","toGMTString","match","RegExp","decodeURIComponent","remove","now","isAbsoluteURL","combineURLs","requestedURL","test","relativeURL","ignoreDuplicateOf","parsed","split","substr","originURL","msie","userAgent","urlParsingNode","createElement","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","location","requestURL","executor","TypeError","resolvePromise","token","callback","arr","stopPropagation","propagationStopped","preventDefault","defaultPrevented","EventEmitter","_emit","_dispatchEvent","removeEventListener","dispatchEvent","eventName","_eventRegistry","_defaultHandlers","defaultHandler","_signal","_self","newCallback","setDefaultHandler","_disabled_","disabled","removeDefaultHandler","pop","capturing","index","Range","startRow","start","end","isEqual","range","contains","compare","compareRange","cmp","comparePoint","containsRange","intersects","isEnd","isStart","setStart","setEnd","inside","insideStart","insideEnd","isMultiLine","compareStart","compareEnd","compareInside","clipRows","firstRow","lastRow","fromPoints","isEmpty","clone","collapseRows","Math","max","toScreenRange","session","screenPosStart","documentToScreenPosition","screenPosEnd","p1","p2","$pointsInOrder","point1","point2","equalPointsInOrder","bColIsAfter","Anchor","doc","$onChange","onChange","attach","setPosition","$insertRight","getPosition","$clipPositionToDocument","getDocument","point","moveIfEqual","deltaIsInsert","action","deltaRowShift","deltaColShift","deltaStart","deltaEnd","$getTransformedPoint","noClip","pos","detach","getLength","getLine","min","Document","textOrLines","super","$lines","$autoNewLine","$newLineMode","insertMergedLines","insert","setValue","getValue","getAllLines","getNewLineCharacter","createAnchor","$split","$detectNewLine","setNewLineMode","newLineMode","getNewLineMode","isNewLine","getLines","getTextRange","getLinesForRange","lines","substring","insertLines","insertFullLines","removeLines","removeFullLines","insertNewLine","position","insertInLine","clippedPos","applyDelta","clonePos","$clipPosition","removeInLine","deleteFirstNewLine","deleteLastNewLine","startCol","endCol","deletedLines","removeNewLine","applyDeltas","deltas","revertDeltas","revertDelta","doNotValidate","isInsert","comparePoints","$splitAndapplyLargeDelta","docLines","MAX","chunk","indexToPosition","newlineLength","positionToIndex","Fetcher","$authorization","onSuccess","prepareConfig","collectHeaders","postJSON","success","errored","postTEXT","json","post","resp","catch","getJSON","getTEXT","clearModuleContext","projectId","alert","fetchModulePort","fetchModuleURL","LocalInterpreter","runMethod","repo","methodRef","runTest","testRef","Interpreter","interpret","store","$DataStore","memstore","MemStore","interpretTest","PromptoWorker","sender","fcn","defaultTimeout","timer","$timeout","deferredUpdate","onUpdate","delay","schedule","isPending","processChange","processChanges","changes","applyChange","invokeUpdate","change","callbackId","$projectId","$project","$dialect","Defaults","$value","$repo","$loading","$selected","onInit","markLoading","loadCore","markLoaded","setProject","loadDependencies","loadProject","setContent","clearValue","errorListener","setDialect","getEditedContents","edited","locateSections","breakpoints","sections","destroyContent","fetchProjectDescription","handleError","markFailed","projectLoaded","stubResource","fetchModuleDeclarations","cursor","items","dep","loadDependency","dependency","fetchModuleDescription","dependenciesUpdated","complete","checkLoadingComplete","oldLog","runner","worker","onmessage","msg","event","command","init"],"mappings":"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","file":"main.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n","// eslint-disable-next-line\nconst globals = global || self || this;\n\n/* a function for inferring dialect from file extension */\nexport const inferDialect = function(path) {\n    return path.substring(path.length-2, path.length-1).toUpperCase();\n};\n\n/* a function for getting a new prompto code parser */\nexport const newParser = function(input, dialect, listener) {\n    const prompto = globals.prompto;\n    const klass = prompto.parser[dialect + \"CleverParser\"];\n    const parser = new klass(input);\n    parser.removeErrorListeners();\n    if(listener)\n        parser.addErrorListener(listener);\n    return parser;\n};\n\n/* a function for parsing prompto code into declarations */\nexport const parse = function(input, dialect, listener) {\n    const parser = newParser(input, dialect, listener);\n    const decls = parser.parse();\n    decls.forEach( decl => {\n        decl.sourceCode = { dialect: dialect, body: decl.fetchBody(parser) };\n    });\n    return decls;\n};\n\n/* a function for producing code from a declaration object */\nexport const unparse = function(context, decl, dialect) {\n    const prompto = globals.prompto;\n    const d = prompto.parser.Dialect[dialect];\n    const writer = new prompto.utils.CodeWriter(d, context.newChildContext());\n    // avoid throwing since this would stop the translation\n    writer.context.problemListener = new prompto.problem.ProblemCollector();\n    if(decl.comments)\n        decl.comments.forEach(cmt => cmt.toDialect(writer));\n    if(decl.annotations)\n        decl.annotations.forEach(ann => ann.toDialect(writer));\n    decl.toDialect(writer);\n    return writer.toString();\n};\n\n/* a function for translating current input to other dialect */\nexport const translate = function(context, data, from, to) {\n    const prompto = globals.prompto;\n    const decls = parse(data, from); // could be cached\n    const dialect = prompto.parser.Dialect[to];\n    const writer = new prompto.utils.CodeWriter(dialect, context.newChildContext());\n    decls.toDialect(writer);\n    return writer.toString();\n};\n\n/* a utility function to sort by field name */\nexport const sortBy = function(a, f) {\n    return a.sort(function(i1,i2) {\n        return (i1[f]>i2[f]) ? 1 : ((i1[f]<i2[f]) ? -1 : 0);\n    });\n};\n\nexport const makeValidId = function(name) {\n    /*eslint no-useless-escape: \"off\"*/\n    return name.replace(/[ /\\.]/g, \"_\").replace(/[\\\"\\'\\(\\),]/g,\"\");\n};\n\n/* use global functions so we can call it on serialized data */\nexport const getCodebaseLength = function(codebase) {\n    if(!codebase)\n        return 0;\n    let length = 0;\n    for(let name in codebase) {\n        if(Array.isArray(codebase[name]))\n            length += codebase[name].length;\n    }\n    return length;\n};\n\nexport const getFirstCodebaseEntry = function(codebase) {\n    if(!codebase)\n        return null;\n    for(let name in codebase) {\n        if(Array.isArray(codebase[name]) && codebase[name].length > 0)\n            return { key: name, value: codebase[name][0] };\n    }\n    return null;\n};\n\nexport const getContentFromEntry = function(entry) {\n    const subType = entry.key===\"categories\" ? \"category\" : entry.key.substring(0, entry.key.length-1);\n    let content = { type: \"prompto\", subType: subType, core: false };\n    switch(subType) {\n        case \"method\":\n            content.name = entry.value.name;\n            content.proto = entry.value.protos[0].proto;\n            break;\n        case \"enumeration\":\n            content.name = entry.value.name;\n            break;\n        default:\n            content.name = entry.value;\n    }\n    return content;\n}\n\nfunction recursivelyConvertDocumentToObject(object) {\n    if(!object)\n        return object;\n    if(Array.isArray(object))\n        return object.map(recursivelyConvertDocumentToObject);\n    if(typeof(object) === typeof({})) {\n        const result = {};\n        if(object.type===\"Document\" && object.value)\n            object = object.value;\n        Object.getOwnPropertyNames(object).forEach(name => result[name] = recursivelyConvertDocumentToObject(object[name]), this);\n        return result;\n    }\n    return object;\n}\n\nexport const convertDocumentToObject = recursivelyConvertDocumentToObject;\n\nfunction recursivelyConvertObjectToDocument(object) {\n    if(!object)\n        return object;\n    if(Array.isArray(object))\n        return object.map(recursivelyConvertObjectToDocument);\n    if(typeof(object) === typeof({})) {\n        const result = {};\n        Object.getOwnPropertyNames(object).forEach(name => result[name] = recursivelyConvertObjectToDocument(object[name]), this);\n        return { type: \"Document\", value: result };\n    }\n    return object;\n}\n\n\nexport const convertObjectToDocument = recursivelyConvertObjectToDocument;","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","import {convertDocumentToObject, getCodebaseLength} from './CodeUtils';\n\nlet prompto = null;\n\n/* need a deferred function for testing with Jest */\nfunction linkPrompto() {\n    // eslint-disable-next-line\n    const globals = global || window || self || this;\n    prompto = globals.prompto;\n}\n\n/* an object which represents a catalog of declarations, classified by type */\nexport default class Catalog {\n\n    constructor(decls, globalContext, filterContext) {\n        linkPrompto();\n        this.readCatalog(globalContext, decls);\n        if (filterContext)\n            this.filterOutDeclarations(filterContext);\n    }\n\n    length() {\n        return getCodebaseLength(this);\n    }\n\n\n    readCatalog(globalContext, decls) {\n        const content = this.loadCatalog(globalContext, decls);\n        this.attributes = content.attributes;\n        this.categories = content.categories;\n        this.enumerations = content.enumerations;\n        this.methods = content.methods;\n        this.tests = content.tests;\n        this.widgets = content.widgets;\n    }\n\n    loadCatalog(globalContext, decls) {\n        if (prompto && decls) {\n            const context = prompto.runtime.Context.newGlobalsContext();\n            // need a fresh context to ensure all get registered\n            context.problemListener = new prompto.problem.ProblemCollector(); // we'll ignore these errors but let's catch them\n            decls.register(context);\n            context.globals = globalContext;\n            const catalog = context.getLocalCatalog();\n            return convertDocumentToObject(catalog);\n        } else\n            return {};\n    }\n\n    filterOutDeclarations(filterContext) {\n        this.filterOutObjects(\"attributes\", filterContext);\n        this.filterOutMethods(filterContext);\n        this.filterOutObjects(\"categories\", filterContext);\n        this.filterOutObjects(\"enumerations\", filterContext);\n        this.filterOutObjects(\"tests\", filterContext);\n        this.filterOutObjects(\"widgets\", filterContext);\n    }\n\n    filterOutObjects(type, filterContext) {\n        if (this[type])\n            this[type] = this[type].filter(name => filterContext.contextForDeclaration(name) === null);\n    }\n\n    filterOutMethods(filterContext) {\n        if (this.methods)\n            this.methods = this.methods.filter(method => this.filterOutMethod(method, filterContext));\n    }\n\n    filterOutMethod(method, filterContext) {\n        const context = filterContext.contextForDeclaration(method.name);\n        if (context === null)\n            return true;\n        // if core has such method, need to check protos\n        if (method.protos.length === 1)\n            return false;\n        const map = filterContext.getRegisteredDeclaration(method.name);\n        method.protos = method.protos.filter(proto=> !map.hasPrototype(proto.proto));\n        return method.protos.length > 0;\n    }\n\n}","module.exports = require('./lib/axios');","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { sortBy } from './CodeUtils';\nimport Catalog from './Catalog';\n\n/**\n * An object which represents the delta between 2 catalogs\n * The purpose of this class is to minimize the re-processing in the IDE\n * when code is updated. Typically, various scenarios can occur:\n *  - code body change, this has not impact on the catalog\n *  - declaration removed\n *  - declaration added\n *  - declarations changed, which for global methods adds complexity because\n *  methods are displayed differently depending on their number of prototypes\n *  This follows the assumption that the number of overloads for a method name is generally very low (< 10).\n */\n\n\nexport default class Delta {\n\n    constructor() {\n        this.removed = null;\n        this.added = null;\n    }\n\n    length() {\n        var length = 0;\n        if (this.removed)\n            length += this.removed.length();\n        if (this.added)\n            length += this.added.length();\n        return length;\n    }\n\n    getContent() {\n        return {removed: this.removed, added: this.added};\n    }\n\n    getFirstAdded() {\n        if(!this.added)\n            return null;\n        for(let key in this.added) {\n            const list = this.added[key];\n            if(list && list.length > 0) {\n                const entry = list[0];\n                if (key === \"methods\") {\n                    return { ...{name: entry.name}, ...entry.protos[0] };\n                } else\n                    return entry;\n            }\n        }\n        return null;\n    }\n\n    filterOutDuplicates() {\n        if (!this.removed && !this.added)\n            return 0;\n        if (!this.removed)\n            return this.added.length();\n        if (!this.added)\n            return this.removed.length();\n        var length = this.filterOutDuplicatesInField(\"attributes\");\n        length += this.filterOutDuplicatesInField(\"methods\");\n        length += this.filterOutDuplicatesInField(\"categories\");\n        length += this.filterOutDuplicatesInField(\"enumerations\");\n        length += this.filterOutDuplicatesInField(\"tests\");\n        length += this.filterOutDuplicatesInField(\"widgets\");\n        return length;\n    }\n\n    filterOutDuplicatesInField(field) {\n        var fn = this.filterOutDuplicatesInLists;\n        if (field === \"methods\")\n            fn = this.filterOutDuplicatesInMethods;\n        else if (field === \"enumerations\")\n            fn = (a, b) => this.filterOutDuplicatesInLists(a, b, \"name\");\n        var length = fn.bind(this)(this.removed[field], this.added[field]);\n        // clean up empty lists\n        if (this.removed[field] && !this.removed[field].length)\n            delete this.removed[field];\n        if (this.added[field] && !this.added[field].length)\n            delete this.added[field];\n        return length;\n    }\n\n    filterOutDuplicatesInLists(a, b, field) {\n        if (a && b) {\n            if (field) {\n                sortBy(a, field);\n                sortBy(b, field);\n            } else {\n                a.sort();\n                b.sort();\n            }\n            for (var i = 0, j = 0; i < a.length && j < b.length;) {\n                var va = a[i];\n                if (field)\n                    va = va[field];\n                var vb = b[j];\n                if (field)\n                    vb = vb[field];\n                if (va === vb) {\n                    a.splice(i, 1);\n                    b.splice(j, 1);\n                } else if (va > vb) {\n                    j++;\n                } else {\n                    i++;\n                }\n            }\n            return a.length + b.length;\n        } else if (a)\n            return a.length;\n        else if (b)\n            return b.length;\n        else\n            return 0;\n    }\n\n    filterOutDuplicatesInMethods(a, b) {\n        if (a && b) {\n            sortBy(a, \"name\");\n            sortBy(b, \"name\");\n            for (var i = 0, j = 0; i < a.length && j < b.length;) {\n                if (a[i].name === b[j].name) {\n                    this.filterOutDuplicatesInLists(a[i].protos, b[j].protos, \"proto\");\n                    if (!a[i].protos || !a[i].protos.length)\n                        a.splice(i, 1);\n                    i++;\n                    if (!b[j].protos || !b[j].protos.length)\n                        b.splice(j, 1);\n                    j++;\n                } else if (a[i].name > b[j].name) {\n                    j++;\n                } else {\n                    i++;\n                }\n            }\n            return a.length + b.length;\n        } else if (a)\n            return a.length;\n        else if (b)\n            return b.length;\n        else\n            return 0;\n    }\n\n    adjustForMovingProtos(context) {\n        // methods with 1 proto are displayed differently than methods with multiple protos\n        // if proto cardinality changes from N to 1 or 1 to N, we need to rebuild the corresponding displays\n        if (this.removed && this.removed.methods) {\n            this.removed.methods.forEach(method => {\n                var decl = context.getRegisteredDeclaration(method.name);\n                if (decl && Object.keys(decl.protos).length === 1 && !this.isModifiedProto(method)) // moved from N to 1\n                    this.adjustMethodForRemovedProtos(method, decl);\n            }, this);\n        }\n        if (this.added && this.added.methods) {\n            this.added.methods.forEach(method => {\n                var decl = context.getRegisteredDeclaration(method.name);\n                if (decl && Object.keys(decl.protos).length - method.protos.length === 1) // moved from 1 to N\n                    this.adjustMethodForAddedProtos(method, decl);\n            }, this);\n        }\n        // cleanup\n        if (this.removed && this.removed.methods) {\n            this.removed.methods.forEach(method => {\n                if (method.proto_to_remove) {\n                    method.protos.push(method.proto_to_remove);\n                    sortBy(method.protos, \"proto\");\n                    delete method.proto_to_remove;\n                }\n            });\n        }\n        if (this.added && this.added.methods) {\n            this.added.methods.forEach(method => {\n                if (method.proto_to_add) {\n                    method.protos.push(method.proto_to_add);\n                    sortBy(method.protos, \"proto\");\n                    delete method.proto_to_add;\n                }\n            });\n        }\n    }\n\n\n    isModifiedProto(method) {\n        if (!this.added || !this.added.methods)\n            return false;\n        var added = this.added.methods.filter(m => m.name === method.name);\n        if (added.length === 0)\n            return false;\n        return true;\n    }\n\n    adjustMethodForAddedProtos(method, decl) {\n        var proto = this.findPreExistingProto(method, decl);\n        if (proto) {\n            var proto_to_move = {proto: proto, main: decl.protos[proto].isEligibleAsMain()};\n            // add it to the remove list\n            if (!this.removed)\n                this.removed = new Catalog();\n            var removed = this.findOrCreateMethod(this.removed, method.name);\n            removed.proto_to_remove = proto_to_move;\n            // add it to the add list\n            method.proto_to_add = proto_to_move;\n        }\n    }\n\n\n    findPreExistingProto(method, decl) {\n        for (var proto in decl.protos) {\n            if (decl.protos.hasOwnProperty(proto)) {\n                var found = false;\n                for (var i = 0; !found && i < method.protos.length; i++) {\n                    found = proto === method.protos[i].proto;\n                }\n                if (!found)\n                    return proto;\n            }\n        }\n        return null; // TODO throw error?\n    }\n\n    adjustMethodForRemovedProtos(method, decl) {\n        // the below will only loop once\n        for (var proto in decl.protos) {\n            if (decl.protos.hasOwnProperty(proto)) {\n                this.adjustMethodForRemovedProto(method, decl, proto);\n            }\n        }\n    }\n\n    adjustMethodForRemovedProto(method, decl, proto) {\n        var proto_to_move = {proto: proto, main: decl.protos[proto].isEligibleAsMain()};\n        // add it to the remove list\n        method.proto_to_remove = proto_to_move;\n        // add it to the added list\n        if (!this.added)\n            this.added = new Catalog();\n        var added = this.findOrCreateMethod(this.added, decl.name);\n        // avoid adding it twice (it might have just been added)\n        added.protos.forEach(current => {\n            if (proto_to_move && proto_to_move.proto === current.proto)\n                proto_to_move = null; // don't add it\n        });\n        // not an existing proto ?\n        if (proto_to_move)\n            added.proto_to_add = proto_to_move;\n    }\n\n    findOrCreateMethod (catalog, name) {\n        if (!catalog.methods)\n            catalog.methods = [];\n        for (var i = 0; i < catalog.methods.length; i++) {\n            if (catalog.methods[i].name === name)\n                return catalog.methods[i];\n        }\n        var created = {name: name, protos: []};\n        catalog.methods.push(created);\n        return created;\n    }\n}","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","import { parse, unparse, newParser, translate } from './CodeUtils';\nimport Catalog from \"./Catalog\";\nimport Delta from \"./Delta\";\n\nlet prompto = null;\nlet profiling = false;\n\n/* need a deferred function for testing with Jest */\nfunction linkPrompto() {\n    // eslint-disable-next-line\n    const globals = global || window || self || this;\n    prompto = globals.prompto;\n}\n\n\n\n/* a class to maintain an up-to-date copy of the repository */\n/* which can be used to detect required changes in the UI, and deltas to commit */\nexport default class Repository {\n\n    constructor() {\n        linkPrompto();\n        this.librariesContext = prompto.runtime.Context.newGlobalsContext();\n        this.projectContext = prompto.runtime.Context.newGlobalsContext();\n        this.projectContext.setParentContext(this.librariesContext);\n        this.moduleId = null;\n        this.lastSuccess = new prompto.declaration.DeclarationList(); // last piece of code successfully registered through handleUpdate\n        this.statuses = {};\n    }\n\n    reset() {\n        this.lastSuccess = new prompto.declaration.DeclarationList();\n    }\n\n    registerLibraryCode(code, dialect) {\n        var decls = parse(code, dialect);\n        decls.register(this.librariesContext);\n    }\n\n    registerLibraryDeclarations(declarations) {\n        declarations.forEach(obj => {\n            var decls = parse(obj.value.body, obj.value.dialect);\n            decls.register(this.librariesContext);\n        }, this);\n    }\n\n    clearLibrariesContext() {\n        this.librariesContext = prompto.runtime.Context.newGlobalsContext();\n        this.projectContext.setParentContext(this.librariesContext);\n    }\n\n\n    publishLibraries() {\n        return { type: \"Document\",\n                value: {\n                    removed: { type: \"Document\", value: {} },\n                    added: this.librariesContext.getCatalog(),\n                    library: true\n                }};\n    }\n\n\n    publishProject() {\n        return { type: \"Document\",\n                value: {\n                    removed: { type: \"Document\", value: {} },\n                    added: this.projectContext.getLocalCatalog(),\n                    project: true\n                }};\n    }\n\n\n    unpublishProject() {\n        var delta = { type: \"Document\",\n                    value: {\n                        removed: this.projectContext.getLocalCatalog(),\n                        added: { type: \"Document\", value: {}}\n                    }};\n        this.projectContext = prompto.runtime.Context.newGlobalsContext();\n        this.projectContext.setParentContext(this.librariesContext);\n        this.statuses = {};\n        return delta;\n    }\n\n    registerProjectDeclarations(moduleId, declarations, progress) {\n        const totalCount = declarations.length;\n        let actualCount = 0;\n        this.moduleId = moduleId;\n        declarations.forEach(obj => {\n            var decl = parse(obj.value.body, obj.value.dialect);\n            decl.register(this.projectContext);\n            if(progress)\n                progress(\"Parsing project code \" + (++actualCount) + \"/\" + totalCount);\n            // prepare for commit\n            var module = obj.value.module;\n            if (module) {\n                // avoid sending back large objects\n                delete obj.value.module.value.dependencies;\n                delete obj.value.module.value.image;\n            }\n            this.registerClean(obj);\n        }, this);\n    }\n\n    getContentBody(content, dialect) {\n        var decl = this.getDeclaration(content);\n        return this.getDeclarationBody(decl, dialect);\n    }\n\n\n    getDeclarationBody(decl, dialect) {\n        if(decl.sourceCode && decl.sourceCode.dialect === dialect)\n            return decl.sourceCode.body;\n        else\n            return unparse(this.projectContext, decl, dialect);\n    }\n\n    getDeclaration(content) {\n        if (content.type === \"TestRef\")\n            return this.projectContext.getRegisteredTest(content.name);\n        else if (content.type === \"MethodRef\") {\n            var methodsMap = this.projectContext.getRegisteredDeclaration({name: content.name});\n            return methodsMap.protos[content.prototype || \"\"] || methodsMap.getFirst();\n        } else\n            return this.projectContext.getRegisteredDeclaration({name: content.name});\n    }\n\n    /* dbDecl = object received from the server */\n    idFromDbDecl(dbDecl) {\n        if (dbDecl.type === \"MethodDeclaration\")\n            return dbDecl.value.name + \"/\" + (dbDecl.value.prototype || \"\");\n        else\n            return dbDecl.value.name;\n    }\n\n\n    /* id = object received from the UI */\n    idFromContent(content) {\n        if (content.type === \"MethodRef\")\n            return content.name + \"/\" + (content.prototype || \"\");\n        else\n            return content.name;\n    }\n\n    /* decl = object received from the parser */\n    idFromDecl(decl) {\n        return decl.name + (decl.getProto !== undefined ? \"/\" + (decl.getProto() || \"\") : \"\");\n    }\n\n    registerClean(obj) {\n        var id = this.idFromDbDecl(obj);\n        this.statuses[id] = {resource: obj, editStatus: \"CLEAN\"};\n    }\n\n\n    registerDestroyed(id) {\n        var obj_status = this.statuses[id];\n        if (obj_status)\n            obj_status.editStatus = \"DELETED\";\n    }\n\n\n    registerDirty(decls, parser, dialect) {\n        decls.forEach(decl => {\n            var decl_obj;\n            var id = this.idFromDecl(decl);\n            var existing = this.statuses[id];\n            if (existing) {\n                decl_obj = existing.resource.value;\n                var body = decl.fetchBody(parser);\n                if (decl_obj.dialect !== dialect || decl_obj.body !== body) {\n                    decl_obj.dialect = dialect;\n                    decl_obj.body = body;\n                    if (existing.editStatus !== \"CREATED\") // don't overwrite\n                        existing.editStatus = \"DIRTY\";\n                    if (decl.getProto !== undefined)\n                        decl_obj.prototype = decl.getProto();\n                    if (decl.storable !== undefined)\n                        decl_obj.storable = decl.storable;\n                    if (decl.symbols)\n                        decl_obj.symbols = decl.symbols.map(function (s) {\n                            return s.name;\n                        });\n                    if (decl.derivedFrom)\n                        decl_obj.derivedFrom = decl.derivedFrom.map(function (s) {\n                            return s.name;\n                        });\n                    else if(decl_obj.derivedFrom)\n                        decl_obj.derivedFrom = [];\n                    if (decl.annotations)\n                        decl_obj.annotations = decl.annotations.map(function (a) {\n                            return a.name;\n                        });\n                    else if(decl_obj.annotations)\n                        decl_obj.annotations = [];\n                }\n            } else {\n                decl_obj = {\n                    name: decl.name,\n                    version: {\n                        type: \"Version\",\n                        value: \"0.0.1\"\n                    },\n                    dialect: dialect,\n                    body: decl.fetchBody(parser),\n                    module: {\n                        type: \"Module\",\n                        value: {\n                            dbId: this.moduleId\n                        }\n                    }\n                };\n                if (decl.getProto !== undefined)\n                    decl_obj.prototype = decl.getProto();\n                if (decl.storable !== undefined)\n                    decl_obj.storable = decl.storable;\n                if (decl.symbols)\n                    decl_obj.symbols = decl.symbols.map(function (s) {\n                        return s.name;\n                    });\n                if (decl.derivedFrom)\n                    decl_obj.derivedFrom = decl.derivedFrom.map(function (s) {\n                        return s.name;\n                    });\n                if (decl.annotations)\n                    decl_obj.annotations = decl.annotations.map(function (a) {\n                        return a.name;\n                    });\n                this.statuses[id] = {\n                    editStatus: \"CREATED\",\n                    resource: {\n                        type: decl.getDeclarationType() + \"Declaration\",\n                        value: decl_obj\n                    }\n                };\n            }\n        }, this);\n    }\n\n\n    markChangesCommitted(storedDecls) {\n        storedDecls.forEach(storedDecl => {\n            const id = this.idFromDbDecl(storedDecl);\n            this.statuses[id].resource.value.dbId = storedDecl.value.dbId;\n            this.statuses[id].editStatus = \"CLEAN\";\n        }, this);\n    }\n\n    clearDeleted() {\n        var deleted = [];\n        for (var id in this.statuses) {\n            if (this.statuses.hasOwnProperty(id) && this.statuses[id].editStatus === \"DELETED\")\n                deleted.push(id);\n        }\n        deleted.forEach(id => {\n            delete this.statuses[id];\n        }, this);\n    }\n\n\n    getEditedDeclarations(contents) {\n        return contents.map( content => {\n            const id = this.idFromContent(content);\n            const status = this.statuses[id];\n            return {type: \"EditedResource\", value: status};\n        }, this);\n    }\n\n\n    translate(data, from, to) {\n        return translate(this.projectContext, data, from, to);\n    }\n\n\n    handleDestroyed(content) {\n        const id = this.idFromContent(content);\n        this.registerDestroyed(id);\n        var obj_status = this.statuses[id];\n        if (obj_status && obj_status.editStatus === \"DELETED\") {\n            var decls = parse(obj_status.resource.value.body, obj_status.resource.value.dialect);\n            decls[0].unregister(this.projectContext);\n            var delta = new Delta();\n            delta.removed = new Catalog(decls, this.librariesContext);\n            delta.filterOutDuplicates();\n            return delta;\n        } else\n            return null;\n    }\n\n\n    handleSetContent(content, dialect, listener) {\n        try {\n            return this.doHandleSetContent(content, dialect, listener);\n        } catch (e) {\n            return this.handleUnhandled(e, listener);\n        }\n    }\n\n\n    doHandleSetContent(content, dialect, listener) {\n        var decls = parse(content, dialect, listener);\n        // don't pollute projectContext\n        var child = this.projectContext.newChildContext();\n        child.pushProblemListener(listener);\n        try {\n            decls.check(child);\n        } finally {\n            child.popProblemListener();\n        }\n        this.lastSuccess = decls; // assume registered content is always parsed successfully\n    }\n\n\n    handleEditContent(content, dialect, listener, selected) {\n        try {\n            return this.doHandleEditContent(content, dialect, listener, selected);\n        } catch (e) {\n            return this.handleUnhandled(e, listener);\n        }\n    }\n\n    handleUnhandled(e, listener) {\n        if (!listener.problems.length) {\n            const problem = {\n                startLine: 1,\n                startColumn: 0,\n                endLine: 1000,\n                endColumn: 1000,\n                type: \"error\",\n                message: \"Invalid syntax!\"\n            };\n            listener.collectProblem(problem);\n        }\n        return null;\n    }\n\n    doHandleEditContent(content, dialect, listener, selected) {\n        const startTime = profiling ? Date.now() : null;\n        const old_decls = this.lastSuccess;\n        const parser = newParser(content, dialect, listener);\n        const new_decls = parser.parse();\n        new_decls.forEach( decl => {\n            decl.sourceCode = { dialect: dialect, body: decl.fetchBody(parser) };\n        });\n        const parseEndTime = profiling ? Date.now() : null;\n        if(profiling)\n            self.logDebug(\"parse time: \" + (parseEndTime - startTime) + \" ms\");\n        // look for duplicates\n        this.checkDuplicates(old_decls, new_decls, listener);\n        const duplicatesEndTime = profiling ? Date.now() : null;\n        if(profiling)\n            self.logDebug(\"check duplicates time: \" + (duplicatesEndTime - parseEndTime) + \" ms\");\n        // only update codebase if syntax is correct and there is no foreseeable damage\n        if (listener.problems.length === 0) {\n            this.lastSuccess = new_decls;\n            const delta = this.updateCodebase(old_decls, new_decls, parser, dialect, listener);\n            const updateEndTime = profiling ? Date.now() : null;\n            if(profiling)\n                self.logDebug(\"repo update time: \" + (updateEndTime - duplicatesEndTime) + \" ms\");\n            if(delta) {\n                const $delta = delta.getContent();\n                if (selected && new_decls.length === 1) // object might have been renamed\n                    $delta.selected = new_decls[0].name;\n                $delta.editedCount = new_decls.length;\n                if(old_decls.length<=1 && new_decls.length===1)\n                    $delta.newContent = delta.getFirstAdded();\n                return $delta;\n            } else\n                return null;\n        } else\n            return null;\n    }\n\n\n    checkDuplicates(old_decls, new_decls, listener) {\n        return new_decls.some(decl => {\n            if(this.isDuplicate(decl, old_decls)) {\n                listener.reportDuplicate(decl.name, decl);\n                return true;\n            } else\n                return false;\n        }, this);\n    }\n\n\n    isDuplicate(decl, old_decls) {\n        // if updating an existing declaration, not a duplicate\n        // TODO refine for method protos\n        if(old_decls.some(old => old.name === decl.name))\n            return false;\n        const existing = this.projectContext.getRegisteredDeclaration(decl.id);\n        if(existing instanceof prompto.runtime.MethodDeclarationMap) {\n            if(decl instanceof prompto.declaration.BaseMethodDeclaration)\n                return existing.hasProto(decl.getProto());\n            else\n                return true;\n        }\n        return !!existing;\n    }\n\n    updateCodebase(old_decls, new_decls, parser, dialect, listener) {\n        var delta = new Delta();\n        delta.removed = new Catalog(old_decls, this.projectContext, this.librariesContext);\n        delta.added = new Catalog(new_decls, this.projectContext, this.librariesContext);\n        var changedIdsCount = delta.filterOutDuplicates();\n        var handled = this.updateRenamed(changedIdsCount, old_decls, new_decls, parser, dialect);\n        this.updateAppContext(old_decls, new_decls, listener);\n        if (!handled) {\n            // either no change in ids, or more than one\n            // simply mark new decls as dirty, don't destroy old ones, since this can\n            // be achieved safely through an explicit action in the UI\n            this.registerDirty(new_decls, parser, dialect);\n        }\n        if (changedIdsCount !== 0) {\n            delta.adjustForMovingProtos(this.projectContext);\n            return delta;\n        } else\n            return null; // no UI update required\n    }\n\n    updateRenamed(changedIdsCount, old_decls, new_decls, parser, dialect) {\n        // special case when changing id of a declaration, try connect to the previous version\n        if (changedIdsCount !== 2 || old_decls.length === 0 || new_decls.length !== old_decls.length)\n            return false;\n        // locate new declaration, for which there is no existing status entry\n        var decls_with_status = new_decls.filter(decl => {\n            var id = this.idFromDecl(decl);\n            var status = this.statuses[id] || null;\n            return status === null;\n        }, this);\n        if (decls_with_status.length === 1) {\n            var new_decl = decls_with_status[0];\n            var new_id = this.idFromDecl(new_decl);\n            var new_status = this.statuses[new_id];\n            // locate corresponding old declaration\n            var orphan_decls = old_decls.filter(function (decl) {\n                var id = this.idFromDecl(decl);\n                return new_decls.filter(function (decl) {\n                    return id === this.idFromDecl(decl);\n                }, this).length === 0;\n            }, this);\n            if (orphan_decls.length === 1) {\n                var old_decl = orphan_decls[0];\n                var old_id = this.idFromDecl(old_decl);\n                var old_status = this.statuses[old_id];\n                // all ok, move the object\n                if (old_status && !new_status) {\n                    // update statuses\n                    this.statuses[new_id] = this.statuses[old_id];\n                    delete this.statuses[old_id];\n                    // update status obj\n                    new_status = old_status;\n                    if (new_status.editStatus !== \"CREATED\") // don't overwrite\n                        new_status.editStatus = \"DIRTY\";\n                    // update declaration obj\n                    new_status.resource.type = new_decl.getDeclarationType() + \"Declaration\";\n                    var decl_obj = new_status.resource.value;\n                    decl_obj.name = new_decl.name;\n                    decl_obj.dialect = dialect;\n                    decl_obj.body = new_decl.fetchBody(parser);\n                    if (new_decl.getProto !== undefined)\n                        decl_obj.prototype = new_decl.getProto();\n                    if (new_decl.storable !== undefined)\n                        decl_obj.storable = new_decl.storable;\n                    return true;\n                }\n            }\n        }\n        // done\n        return false;\n    }\n\n    updateAppContext(old_decls, new_decls, listener) {\n        old_decls.unregister(this.projectContext); // TODO: manage damage on objects referring to these\n        new_decls.unregister(this.projectContext); // avoid duplicate declaration errors\n        var saved_listener = this.projectContext.problemListener;\n        try {\n            this.projectContext.problemListener = listener;\n            new_decls.register(this.projectContext);\n            new_decls.check(this.projectContext.newChildContext()); // don't pollute projectContext\n        } finally {\n            this.projectContext.problemListener = saved_listener;\n        }\n    }\n\n    contentForStackFrame(stackFrame) {\n        if (stackFrame.categoryName && stackFrame.categoryName.length)\n            return this.categoryForStackFrame(stackFrame);\n        else\n            return this.methodForStackFrame(stackFrame);\n    }\n\n    categoryForStackFrame(stackFrame) {\n        const decl = this.projectContext.getRegisteredDeclaration({ name: stackFrame.categoryName});\n        if(decl)\n            return { type: this.typeFromDeclaration(this.projectContext, decl), name: stackFrame.categoryName };\n        else\n            return null;\n    }\n\n    typeFromDeclaration(context, decl) {\n        if(decl instanceof prompto.declaration.BaseMethodDeclaration)\n            return \"MethodRef\";\n        else if(decl instanceof prompto.declaration.AttributeDeclaration)\n            return \"AttributeRef\";\n        else if(decl instanceof prompto.declaration.CategoryDeclaration) {\n            if(decl.isWidget(context))\n                return \"WidgetRef\";\n            else\n                return \"CategoryRef\";\n        } else if (decl instanceof prompto.declaration.EnumeratedCategoryDeclaration || decl instanceof prompto.declaration.EnumeratedNativeDeclaration)\n            return \"EnumerationRef\";\n        else if(decl instanceof prompto.declaration.TestMethodDeclaration)\n            return \"TestRef\";\n        else\n            return null; // TODO log\n    }\n\n\n    methodForStackFrame(stackFrame) {\n        let decl = this.projectContext.getRegisteredTest(stackFrame.methodName);\n        if(!decl) {\n            const methodsMap = this.projectContext.getRegisteredDeclaration({name: stackFrame.methodName});\n            if(methodsMap)\n                decl = stackFrame.methodProto ? methodsMap.protos[stackFrame.methodProto] : methodsMap.getFirst();\n        }\n        if(decl)\n            return { type: this.typeFromDeclaration(this.projectContext, decl), name: stackFrame.methodName, prototype: stackFrame.methodProto || null };\n        else\n            return null;\n    }\n\n\n    createBreakpointAtLine(content, line, dialect) {\n        if(content === null)\n            return null;\n        let creator = null;\n        switch(content.type) {\n            case \"MethodRef\":\n                creator = this.createBreakpointAtMethodLine;\n                break;\n            case \"TestRef\":\n                creator = this.createBreakpointAtTestLine;\n                break;\n            case \"CategoryRef\":\n            case \"WidgetRef\":\n                creator = this.createBreakpointAtCategoryLine;\n                break;\n        }\n        if(creator === null)\n            return null;\n        let decl = this.getDeclaration(content);\n        if(decl === null)\n            return null;\n        if(decl.sourceCode.dialect !== dialect) {\n            const body = this.getDeclarationBody(decl, dialect);\n            decl = parse(body, dialect)[0];\n        }\n        const brkpt = creator.bind(this)(decl, line);\n        // for now always a line breakpoint (planning for constructor, monitor...)\n        return brkpt ? { type: \"LineBreakpoint\", value: brkpt } : null;\n    }\n\n    createBreakpointAtMethodLine(decl, line) {\n        const section = decl.locateSectionAtLine(line);\n        if(section === null)\n            return null;\n        else\n            return { methodName:  decl.name, methodProto: decl.getProto(this.projectContext), statementLine: section.startLocation.line };\n    }\n\n    createBreakpointAtTestLine(decl, line) {\n        const section = decl.locateSectionAtLine(line);\n        if(section === null)\n            return null;\n        else\n            return { methodName:  decl.name, statementLine: section.startLocation.line };\n    }\n\n    createBreakpointAtCategoryLine(decl, line) {\n        if(!decl.methods)\n            return null;\n        for(let i=0; i<decl.methods.length; i++ ) {\n            const method = decl.methods[i];\n            let brkpt = this.createBreakpointAtMethodLine(method, line);\n            if(brkpt !== null) {\n                return Object.assign({}, brkpt, {categoryName: decl.name, methodLine: method.startLocation.line} );\n            }\n        }\n        return null;\n    }\n\n    locateSection(breakpoint) {\n        let declaration = null;\n        if (breakpoint.categoryName)\n            declaration = this.projectContext.getRegisteredDeclaration({name: breakpoint.categoryName});\n        else if (breakpoint.methodName) {\n            if(breakpoint.methodName === '\"')\n                declaration = this.projectContext.getRegisteredTest(breakpoint.name);\n            else {\n                const methods = this.projectContext.getRegisteredDeclaration({name: breakpoint.methodName});\n                if (methods)\n                    declaration = methods.protos[breakpoint.methodProto];\n            }\n        }\n        if(declaration==null)\n            return null;\n        const section = declaration.locateSectionAtLine(breakpoint.statementLine);\n        if(section==null)\n            return null;\n        const result = section.serialize();\n        if(!result.value.path)\n            result.value.path = this.computeValuePath(breakpoint, declaration, section);\n        return result\n    }\n\n    computeValuePath(breakpoint, declaration, section) {\n        let typeName = \"\";\n        let valueName = \"\";\n        let protoName = \"\";\n        if(declaration instanceof prompto.declaration.TestMethodDeclaration) {\n            typeName = \"test\";\n            valueName = declaration.name;\n        } else if(declaration instanceof prompto.declaration.BaseMethodDeclaration) {\n            if(declaration.memberOf) {\n                typeName = \"category\";\n                valueName = declaration.memberOf.name;\n            } else {\n                typeName = \"method\";\n                valueName = declaration.name;\n                protoName = \"/\" + breakpoint.methodProto;\n            }\n        }\n        return \"store:/\" + typeName +\"/\" + valueName + protoName;\n    }\n}\n","// eslint-disable-next-line\nconst globals = self;\nglobals.Honey = {'requirePath': ['..']}; // walk up to js folder\nglobals.importScripts(\"/js/lib/require.js\", \"/js/lib/prompto.core.bundle.js\");\n\nconst log = function() {\n    var e = Array.prototype.slice.call(arguments, 0);\n    globals.logDebug(e);\n    postMessage({\n        type: \"log\",\n        data: e\n    });\n};\n\nglobals.logDebug = console.log;\nconsole.error = console.warn = console.log = console.trace = log;\n\n/* not Webpacking this yet because that would require webpacking and installing prompto runtime too, which is not ready yet */\n\nconst ProblemCollector = globals[\"prompto\"].problem.ProblemCollector;\n\n/* ES6 inheritance crashes here */\n\nfunction AnnotatingErrorListener(problems) {\n    const pc = new ProblemCollector(problems);\n    pc.collectProblem = function(problem) {\n        // convert to ACE annotation\n        problem = { row : problem.startLine - 1,\n            column : problem.startColumn,\n            endRow : problem.endLine - 1,\n            endColumn : problem.endColumn,\n            type : problem.type,\n            text : problem.message };\n        this.problems.push(problem);\n    };\n    return pc;\n}\n\nglobals.AnnotatingErrorListener = AnnotatingErrorListener;\n\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\nconst stopPropagation = function () {\n    this.propagationStopped = true;\n};\n\nconst preventDefault = function () {\n    this.defaultPrevented = true;\n};\n\nexport default class EventEmitter {\n\n    constructor() {\n        this._emit = this._dispatchEvent;\n        this.on = this.addEventListener;\n        this.off = this.removeEventListener;\n        this.removeListener = this.removeEventListener;\n    }\n\n    dispatchEvent(eventName, e) {\n        this._eventRegistry || (this._eventRegistry = {});\n        this._defaultHandlers || (this._defaultHandlers = {});\n\n        var listeners = this._eventRegistry[eventName] || [];\n        var defaultHandler = this._defaultHandlers[eventName];\n        if (!listeners.length && !defaultHandler)\n            return;\n\n        if (typeof e != \"object\" || !e)\n            e = {};\n\n        if (!e.type)\n            e.type = eventName;\n        if (!e.stopPropagation)\n            e.stopPropagation = stopPropagation;\n        if (!e.preventDefault)\n            e.preventDefault = preventDefault;\n\n        listeners = listeners.slice();\n        for (var i = 0; i < listeners.length; i++) {\n            listeners[i](e, this);\n            if (e.propagationStopped)\n                break;\n        }\n\n        if (defaultHandler && !e.defaultPrevented)\n            return defaultHandler(e, this);\n    }\n\n\n    _signal(eventName, e) {\n        var listeners = (this._eventRegistry || {})[eventName];\n        if (!listeners)\n            return;\n        listeners = listeners.slice();\n        for (var i = 0; i < listeners.length; i++)\n            listeners[i](e, this);\n    }\n\n    once(eventName, callback) {\n        var _self = this;\n        this.addEventListener(eventName, function newCallback() {\n            _self.removeEventListener(eventName, newCallback);\n            callback.apply(null, arguments);\n        });\n        if (!callback) {\n            return new Promise(function (resolve) {\n                callback = resolve;\n            });\n        }\n    }\n\n    setDefaultHandler(eventName, callback) {\n        var handlers = this._defaultHandlers;\n        if (!handlers)\n            handlers = this._defaultHandlers = {_disabled_: {}};\n\n        if (handlers[eventName]) {\n            var old = handlers[eventName];\n            var disabled = handlers._disabled_[eventName];\n            if (!disabled)\n                handlers._disabled_[eventName] = disabled = [];\n            disabled.push(old);\n            var i = disabled.indexOf(callback);\n            if (i !== -1)\n                disabled.splice(i, 1);\n        }\n        handlers[eventName] = callback;\n    }\n\n    removeDefaultHandler(eventName, callback) {\n        var handlers = this._defaultHandlers;\n        if (!handlers)\n            return;\n        var disabled = handlers._disabled_[eventName];\n\n        if (handlers[eventName] === callback) {\n            if (disabled)\n                this.setDefaultHandler(eventName, disabled.pop());\n        } else if (disabled) {\n            var i = disabled.indexOf(callback);\n            if (i !== -1)\n                disabled.splice(i, 1);\n        }\n    }\n\n    addEventListener(eventName, callback, capturing) {\n        this._eventRegistry = this._eventRegistry || {};\n\n        var listeners = this._eventRegistry[eventName];\n        if (!listeners)\n            listeners = this._eventRegistry[eventName] = [];\n\n        if (listeners.indexOf(callback) === -1)\n            listeners[capturing ? \"unshift\" : \"push\"](callback);\n        return callback;\n    }\n\n    removeEventListener(eventName, callback) {\n        this._eventRegistry = this._eventRegistry || {};\n\n        var listeners = this._eventRegistry[eventName];\n        if (!listeners)\n            return;\n\n        var index = listeners.indexOf(callback);\n        if (index !== -1)\n            listeners.splice(index, 1);\n    }\n\n    removeAllListeners(eventName) {\n        if (this._eventRegistry)\n            this._eventRegistry[eventName] = [];\n    }\n\n}","/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\n/**\n * This object is used in various places to indicate a region within the editor. To better visualize how this works, imagine a rectangle. Each quadrant of the rectangle is analogous to a range, as ranges contain a starting row and starting column, and an ending row, and ending column.\n * @class Range\n **/\n\nexport default class Range {\n\n    /**\n     * Creates a new `Range` object with the given starting and ending row and column points.\n     * @param {Number} startRow The starting row\n     * @param {Number} startColumn The starting column\n     * @param {Number} endRow The ending row\n     * @param {Number} endColumn The ending column\n     *\n     * @constructor\n     **/\n    constructor(startRow, startColumn, endRow, endColumn) {\n        this.start = {\n            row: startRow,\n            column: startColumn\n        };\n\n        this.end = {\n            row: endRow,\n            column: endColumn\n        };\n    }\n\n    /**\n     * Returns `true` if and only if the starting row and column, and ending row and column, are equivalent to those given by `range`.\n     * @param {Range} range A range to check against\n     *\n     * @return {Boolean}\n     **/\n    isEqual(range) {\n        return this.start.row === range.start.row &&\n            this.end.row === range.end.row &&\n            this.start.column === range.start.column &&\n            this.end.column === range.end.column;\n    }\n\n    /**\n     *\n     * Returns a string containing the range's row and column information, given like this:\n     * ```\n     *    [start.row/start.column] -> [end.row/end.column]\n     * ```\n     * @return {String}\n     **/\n    toString() {\n        return (\"Range: [\" + this.start.row + \"/\" + this.start.column +\n            \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\");\n    }\n\n    /**\n     *\n     * Returns `true` if the `row` and `column` provided are within the given range. This can better be expressed as returning `true` if:\n     * ```javascript\n     *    this.start.row <= row <= this.end.row &&\n     *    this.start.column <= column <= this.end.column\n     * ```\n     * @param {Number} row A row to check for\n     * @param {Number} column A column to check for\n     * @returns {Boolean}\n     * @related Range.compare\n     **/\n\n    contains(row, column) {\n        return this.compare(row, column) === 0;\n    }\n\n    /**\n     * Compares `this` range (A) with another range (B).\n     * @param {Range} range A range to compare with\n     *\n     * @related Range.compare\n     * @returns {Number} This method returns one of the following numbers:<br/>\n     * <br/>\n     * * `-2`: (B) is in front of (A), and doesn't intersect with (A)<br/>\n     * * `-1`: (B) begins before (A) but ends inside of (A)<br/>\n     * * `0`: (B) is completely inside of (A) OR (A) is completely inside of (B)<br/>\n     * * `+1`: (B) begins inside of (A) but ends outside of (A)<br/>\n     * * `+2`: (B) is after (A) and doesn't intersect with (A)<br/>\n     * * `42`: FTW state: (B) ends in (A) but starts outside of (A)\n     **/\n    compareRange(range) {\n        var cmp,\n            end = range.end,\n            start = range.start;\n\n        cmp = this.compare(end.row, end.column);\n        if (cmp === 1) {\n            cmp = this.compare(start.row, start.column);\n            if (cmp === 1) {\n                return 2;\n            } else if (cmp === 0) {\n                return 1;\n            } else {\n                return 0;\n            }\n        } else if (cmp === -1) {\n            return -2;\n        } else {\n            cmp = this.compare(start.row, start.column);\n            if (cmp === -1) {\n                return -1;\n            } else if (cmp === 1) {\n                return 42;\n            } else {\n                return 0;\n            }\n        }\n    }\n\n    /**\n     * Checks the row and column points of `p` with the row and column points of the calling range.\n     *\n     * @param {Range} p A point to compare with\n     *\n     * @related Range.compare\n     * @returns {Number} This method returns one of the following numbers:<br/>\n     * * `0` if the two points are exactly equal<br/>\n     * * `-1` if `p.row` is less then the calling range<br/>\n     * * `1` if `p.row` is greater than the calling range<br/>\n     * <br/>\n     * If the starting row of the calling range is equal to `p.row`, and:<br/>\n     * * `p.column` is greater than or equal to the calling range's starting column, this returns `0`<br/>\n     * * Otherwise, it returns -1<br/>\n     *<br/>\n     * If the ending row of the calling range is equal to `p.row`, and:<br/>\n     * * `p.column` is less than or equal to the calling range's ending column, this returns `0`<br/>\n     * * Otherwise, it returns 1<br/>\n     **/\n    comparePoint(p) {\n        return this.compare(p.row, p.column);\n    }\n\n    /**\n     * Checks the start and end points of `range` and compares them to the calling range. Returns `true` if the `range` is contained within the caller's range.\n     * @param {Range} range A range to compare with\n     *\n     * @returns {Boolean}\n     * @related Range.comparePoint\n     **/\n    containsRange(range) {\n        return this.comparePoint(range.start) === 0 && this.comparePoint(range.end) === 0;\n    }\n\n    /**\n     * Returns `true` if passed in `range` intersects with the one calling this method.\n     * @param {Range} range A range to compare with\n     *\n     * @returns {Boolean}\n     **/\n    intersects(range) {\n        var cmp = this.compareRange(range);\n        return (cmp === -1 || cmp === 0 || cmp === 1);\n    }\n\n    /**\n     * Returns `true` if the caller's ending row point is the same as `row`, and if the caller's ending column is the same as `column`.\n     * @param {Number} row A row point to compare with\n     * @param {Number} column A column point to compare with\n     *\n     * @returns {Boolean}\n     **/\n    isEnd(row, column) {\n        return this.end.row === row && this.end.column === column;\n    }\n\n    /**\n     * Returns `true` if the caller's starting row point is the same as `row`, and if the caller's starting column is the same as `column`.\n     * @param {Number} row A row point to compare with\n     * @param {Number} column A column point to compare with\n     *\n     * @returns {Boolean}\n     **/\n    isStart(row, column) {\n        return this.start.row === row && this.start.column === column;\n    }\n\n    /**\n     * Sets the starting row and column for the range.\n     * @param {Number} row A row point to set\n     * @param {Number} column A column point to set\n     *\n     **/\n    setStart(row, column) {\n        if (typeof row === \"object\") {\n            this.start.column = row.column;\n            this.start.row = row.row;\n        } else {\n            this.start.row = row;\n            this.start.column = column;\n        }\n    }\n\n    /**\n     * Sets the starting row and column for the range.\n     * @param {Number} row A row point to set\n     * @param {Number} column A column point to set\n     *\n     **/\n    setEnd(row, column) {\n        if (typeof row === \"object\") {\n            this.end.column = row.column;\n            this.end.row = row.row;\n        } else {\n            this.end.row = row;\n            this.end.column = column;\n        }\n    }\n\n    /**\n     * Returns `true` if the `row` and `column` are within the given range.\n     * @param {Number} row A row point to compare with\n     * @param {Number} column A column point to compare with\n     *\n     *\n     * @returns {Boolean}\n     * @related Range.compare\n     **/\n    inside(row, column) {\n        if (this.compare(row, column) === 0) {\n            if (this.isEnd(row, column) || this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Returns `true` if the `row` and `column` are within the given range's starting points.\n     * @param {Number} row A row point to compare with\n     * @param {Number} column A column point to compare with\n     *\n     * @returns {Boolean}\n     * @related Range.compare\n     **/\n    insideStart(row, column) {\n        if (this.compare(row, column) === 0) {\n            if (this.isEnd(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Returns `true` if the `row` and `column` are within the given range's ending points.\n     * @param {Number} row A row point to compare with\n     * @param {Number} column A column point to compare with\n     *\n     * @returns {Boolean}\n     * @related Range.compare\n     *\n     **/\n    insideEnd(row, column) {\n        if (this.compare(row, column) === 0) {\n            if (this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Checks the row and column points with the row and column points of the calling range.\n     * @param {Number} row A row point to compare with\n     * @param {Number} column A column point to compare with\n     *\n     *\n     * @returns {Number} This method returns one of the following numbers:<br/>\n     * `0` if the two points are exactly equal <br/>\n     * `-1` if `p.row` is less then the calling range <br/>\n     * `1` if `p.row` is greater than the calling range <br/>\n     *  <br/>\n     * If the starting row of the calling range is equal to `p.row`, and: <br/>\n     * `p.column` is greater than or equal to the calling range's starting column, this returns `0`<br/>\n     * Otherwise, it returns -1<br/>\n     * <br/>\n     * If the ending row of the calling range is equal to `p.row`, and: <br/>\n     * `p.column` is less than or equal to the calling range's ending column, this returns `0` <br/>\n     * Otherwise, it returns 1\n     **/\n    compare(row, column) {\n        if (!this.isMultiLine()) {\n            if (row === this.start.row) {\n                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\n            }\n        }\n\n        if (row < this.start.row)\n            return -1;\n\n        if (row > this.end.row)\n            return 1;\n\n        if (this.start.row === row)\n            return column >= this.start.column ? 0 : -1;\n\n        if (this.end.row === row)\n            return column <= this.end.column ? 0 : 1;\n\n        return 0;\n    }\n\n    /**\n     * Checks the row and column points with the row and column points of the calling range.\n     * @param {Number} row A row point to compare with\n     * @param {Number} column A column point to compare with\n     *\n     * @returns {Number} This method returns one of the following numbers:<br/>\n     * <br/>\n     * `0` if the two points are exactly equal<br/>\n     * `-1` if `p.row` is less then the calling range<br/>\n     * `1` if `p.row` is greater than the calling range, or if `isStart` is `true`.<br/>\n     * <br/>\n     * If the starting row of the calling range is equal to `p.row`, and:<br/>\n     * `p.column` is greater than or equal to the calling range's starting column, this returns `0`<br/>\n     * Otherwise, it returns -1<br/>\n     * <br/>\n     * If the ending row of the calling range is equal to `p.row`, and:<br/>\n     * `p.column` is less than or equal to the calling range's ending column, this returns `0`<br/>\n     * Otherwise, it returns 1\n     *\n     **/\n    compareStart(row, column) {\n        if (this.start.row === row && this.start.column === column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    }\n\n    /**\n     * Checks the row and column points with the row and column points of the calling range.\n     * @param {Number} row A row point to compare with\n     * @param {Number} column A column point to compare with\n     *\n     *\n     * @returns {Number} This method returns one of the following numbers:<br/>\n     * `0` if the two points are exactly equal<br/>\n     * `-1` if `p.row` is less then the calling range<br/>\n     * `1` if `p.row` is greater than the calling range, or if `isEnd` is `true.<br/>\n     * <br/>\n     * If the starting row of the calling range is equal to `p.row`, and:<br/>\n     * `p.column` is greater than or equal to the calling range's starting column, this returns `0`<br/>\n     * Otherwise, it returns -1<br/>\n     *<br/>\n     * If the ending row of the calling range is equal to `p.row`, and:<br/>\n     * `p.column` is less than or equal to the calling range's ending column, this returns `0`<br/>\n     * Otherwise, it returns 1\n     */\n    compareEnd(row, column) {\n        if (this.end.row === row && this.end.column === column) {\n            return 1;\n        } else {\n            return this.compare(row, column);\n        }\n    }\n\n    /**\n     * Checks the row and column points with the row and column points of the calling range.\n     * @param {Number} row A row point to compare with\n     * @param {Number} column A column point to compare with\n     *\n     *\n     * @returns {Number} This method returns one of the following numbers:<br/>\n     * * `1` if the ending row of the calling range is equal to `row`, and the ending column of the calling range is equal to `column`<br/>\n     * * `-1` if the starting row of the calling range is equal to `row`, and the starting column of the calling range is equal to `column`<br/>\n     * <br/>\n     * Otherwise, it returns the value after calling [[Range.compare `compare()`]].\n     *\n     **/\n    compareInside(row, column) {\n        if (this.end.row === row && this.end.column === column) {\n            return 1;\n        } else if (this.start.row === row && this.start.column === column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    }\n\n    /**\n     * Returns the part of the current `Range` that occurs within the boundaries of `firstRow` and `lastRow` as a new `Range` object.\n     * @param {Number} firstRow The starting row\n     * @param {Number} lastRow The ending row\n     *\n     *\n     * @returns {Range}\n     **/\n    clipRows(firstRow, lastRow) {\n        var start, end;\n        if (this.end.row > lastRow)\n            end = {row: lastRow + 1, column: 0};\n        else if (this.end.row < firstRow)\n            end = {row: firstRow, column: 0};\n\n        if (this.start.row > lastRow)\n            start = {row: lastRow + 1, column: 0};\n        else if (this.start.row < firstRow)\n            start = {row: firstRow, column: 0};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    }\n\n    /**\n     * Changes the row and column points for the calling range for both the starting and ending points.\n     * @param {Number} row A new row to extend to\n     * @param {Number} column A new column to extend to\n     *\n     *\n     * @returns {Range} The original range with the new row\n     **/\n    extend(row, column) {\n        var cmp = this.compare(row, column);\n\n        if (cmp === 0)\n            return this;\n        else if (cmp === -1)\n            var start = {row: row, column: column};\n        else\n            var end = {row: row, column: column};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    }\n\n    isEmpty() {\n        return (this.start.row === this.end.row && this.start.column === this.end.column);\n    }\n\n    /**\n     *\n     * Returns `true` if the range spans across multiple lines.\n     * @returns {Boolean}\n     **/\n    isMultiLine() {\n        return (this.start.row !== this.end.row);\n    }\n\n\n    /**\n     *\n     * Returns a duplicate of the calling range.\n     * @returns {Range}\n     **/\n    clone() {\n        return Range.fromPoints(this.start, this.end);\n    }\n\n    /**\n     *\n     * Returns a range containing the starting and ending rows of the original range, but with a column value of `0`.\n     * @returns {Range}\n     **/\n    collapseRows() {\n        if (this.end.column === 0)\n            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0);\n        else\n            return new Range(this.start.row, 0, this.end.row, 0);\n    }\n\n    /**\n     * Given the current `Range`, this function converts those starting and ending points into screen positions, and then returns a new `Range` object.\n     * @param {EditSession} session The `EditSession` to retrieve coordinates from\n     *\n     *\n     * @returns {Range}\n     **/\n    toScreenRange(session) {\n        var screenPosStart = session.documentToScreenPosition(this.start);\n        var screenPosEnd = session.documentToScreenPosition(this.end);\n\n        return new Range(\n            screenPosStart.row, screenPosStart.column,\n            screenPosEnd.row, screenPosEnd.column\n        );\n    }\n\n\n    /* experimental */\n    moveBy = function (row, column) {\n        this.start.row += row;\n        this.start.column += column;\n        this.end.row += row;\n        this.end.column += column;\n    }\n\n    /**\n     * Creates and returns a new `Range` based on the row and column of the given parameters.\n     * @param {Range} start A starting point to use\n     * @param {Range} end An ending point to use\n     *\n     * @returns {Range}\n     **/\n    static fromPoints(start, end) {\n        return new Range(start.row, start.column, end.row, end.column);\n    }\n\n\n    static comparePoints(p1, p2) {\n        return p1.row - p2.row || p1.column - p2.column;\n    }\n\n}","/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\n\nfunction $pointsInOrder(point1, point2, equalPointsInOrder) {\n    var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n    return (point1.row < point2.row) || (point1.row === point2.row && bColIsAfter);\n}\n\nfunction $getTransformedPoint(delta, point, moveIfEqual) {\n    // Get delta info.\n    var deltaIsInsert = delta.action === \"insert\";\n    var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row    - delta.start.row);\n    var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);\n    var deltaStart = delta.start;\n    var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.\n\n    // DELTA AFTER POINT: No change needed.\n    if ($pointsInOrder(point, deltaStart, moveIfEqual)) {\n        return {\n            row: point.row,\n            column: point.column\n        };\n    }\n\n    // DELTA BEFORE POINT: Move point by delta shift.\n    if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {\n        return {\n            row: point.row + deltaRowShift,\n            column: point.column + (point.row === deltaEnd.row ? deltaColShift : 0)\n        };\n    }\n\n    // DELTA ENVELOPS POINT (delete only): Move point to delta start.\n    // TODO warn if delta.action != \"remove\" ?\n\n    return {\n        row: deltaStart.row,\n        column: deltaStart.column\n    };\n}\n\n/**\n *\n * Defines a floating pointer in the document. Whenever text is inserted or deleted before the cursor, the position of the anchor is updated.\n *\n * @class Anchor\n **/\n\n/**\n * Creates a new `Anchor` and associates it with a document.\n *\n * @param {Document} doc The document to associate with the anchor\n * @param {Number} row The starting row position\n * @param {Number} column The starting column position\n *\n * @constructor\n **/\n\n export default class Anchor {\n\n     constructor(doc, row, column) {\n        this.$onChange = this.onChange.bind(this);\n        this.attach(doc);\n\n        if (typeof column == \"undefined\")\n            this.setPosition(row.row, row.column);\n        else\n            this.setPosition(row, column);\n         /**\n          * experimental: allows anchor to stick to the next on the left\n          */\n         this.$insertRight = false;\n    }\n\n    /**\n     * Returns an object identifying the `row` and `column` position of the current anchor.\n     * @returns {Object}\n     **/\n    getPosition() {\n        return this.$clipPositionToDocument(this.row, this.column);\n    }\n\n    /**\n     *\n     * Returns the current document.\n     * @returns {Document}\n     **/\n    getDocument() {\n        return this.document;\n    }\n\n    /**\n     * Fires whenever the anchor position changes.\n     *\n     * Both of these objects have a `row` and `column` property corresponding to the position.\n     *\n     * Events that can trigger this function include [[Anchor.setPosition `setPosition()`]].\n     *\n     * @event change\n     * @param {Object} e  An object containing information about the anchor position. It has two properties:\n     *  - `old`: An object describing the old Anchor position\n     *  - `value`: An object describing the new Anchor position\n     *\n     **/\n    onChange(delta) {\n        if (delta.start.row === delta.end.row && delta.start.row !== this.row)\n            return;\n\n        if (delta.start.row > this.row)\n            return;\n\n        var point = $getTransformedPoint(delta, {row: this.row, column: this.column}, this.$insertRight);\n        this.setPosition(point.row, point.column, true);\n    }\n\n\n    /**\n     * Sets the anchor position to the specified row and column. If `noClip` is `true`, the position is not clipped.\n     * @param {Number} row The row index to move the anchor to\n     * @param {Number} column The column index to move the anchor to\n     * @param {Boolean} noClip Identifies if you want the position to be clipped\n     *\n     **/\n    setPosition(row, column, noClip) {\n        var pos;\n        if (noClip) {\n            pos = {\n                row: row,\n                column: column\n            };\n        } else {\n            pos = this.$clipPositionToDocument(row, column);\n        }\n\n        if (this.row === pos.row && this.column === pos.column)\n            return;\n\n        var old = {\n            row: this.row,\n            column: this.column\n        };\n\n        this.row = pos.row;\n        this.column = pos.column;\n        this._signal(\"change\", {\n            old: old,\n            value: pos\n        });\n    }\n\n    /**\n     * When called, the `\"change\"` event listener is removed.\n     *\n     **/\n    detach() {\n        this.document.removeEventListener(\"change\", this.$onChange);\n    }\n\n    attach(doc) {\n        this.document = doc || this.document;\n        this.document.on(\"change\", this.$onChange);\n    }\n\n    /**\n     * Clips the anchor position to the specified row and column.\n     * @param {Number} row The row index to clip the anchor to\n     * @param {Number} column The column index to clip the anchor to\n     *\n     **/\n    $clipPositionToDocument(row, column) {\n        var pos = {};\n\n        if (row >= this.document.getLength()) {\n            pos.row = Math.max(0, this.document.getLength() - 1);\n            pos.column = this.document.getLine(pos.row).length;\n        }\n        else if (row < 0) {\n            pos.row = 0;\n            pos.column = 0;\n        }\n        else {\n            pos.row = row;\n            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));\n        }\n\n        if (column < 0)\n            pos.column = 0;\n\n        return pos;\n    }\n\n}","/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\n\nimport Range from './Range';\nimport Anchor from './Anchor';\nimport EventEmitter from './EventEmitter';\n\n/*\nfunction throwDeltaError(delta, errorText){\n    console.log(\"Invalid Delta:\", delta);\n    throw new Error(\"Invalid Delta: \" + errorText);\n}\n\nfunction positionInDocument(docLines, position) {\n    return position.row    >= 0 && position.row    <  docLines.length &&\n        position.column >= 0 && position.column <= docLines[position.row].length;\n}\n\n\nfunction validateDelta(docLines, delta) {\n    // Validate action string.\n    if (delta.action != \"insert\" && delta.action != \"remove\")\n        throwDeltaError(delta, \"delta.action must be 'insert' or 'remove'\");\n\n    // Validate lines type.\n    if (!(delta.lines instanceof Array))\n        throwDeltaError(delta, \"delta.lines must be an Array\");\n\n    // Validate range type.\n    if (!delta.start || !delta.end)\n        throwDeltaError(delta, \"delta.start/end must be an present\");\n\n    // Validate that the start point is contained in the document.\n    var start = delta.start;\n    if (!positionInDocument(docLines, delta.start))\n        throwDeltaError(delta, \"delta.start must be contained in document\");\n\n    // Validate that the end point is contained in the document (remove deltas only).\n    var end = delta.end;\n    if (delta.action == \"remove\" && !positionInDocument(docLines, end))\n        throwDeltaError(delta, \"delta.end must contained in document for 'remove' actions\");\n\n    // Validate that the .range size matches the .lines size.\n    var numRangeRows = end.row - start.row;\n    var numRangeLastLineChars = (end.column - (numRangeRows == 0 ? start.column : 0));\n    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars)\n        throwDeltaError(delta, \"delta.range must match delta lines\");\n}\n*/\n\nfunction applyDelta(docLines, delta, doNotValidate) {\n    // disabled validation since it breaks autocompletion popup\n    // if (!doNotValidate)\n    //    validateDelta(docLines, delta);\n\n    var row = delta.start.row;\n    var startColumn = delta.start.column;\n    var line = docLines[row] || \"\";\n    switch (delta.action) {\n        case \"insert\":\n            var lines = delta.lines;\n            if (lines.length === 1) {\n                docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n            } else {\n                var args = [row, 1].concat(delta.lines);\n                docLines.splice.apply(docLines, args);\n                docLines[row] = line.substring(0, startColumn) + docLines[row];\n                docLines[row + delta.lines.length - 1] += line.substring(startColumn);\n            }\n            break;\n        case \"remove\":\n            var endColumn = delta.end.column;\n            var endRow = delta.end.row;\n            if (row === endRow) {\n                docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);\n            } else {\n                docLines.splice(\n                    row, endRow - row + 1,\n                    line.substring(0, startColumn) + docLines[endRow].substring(endColumn)\n                );\n            }\n            break;\n        default:\n            throw new Error(\"Unsupported: \" + delta.action);\n    }\n}\n\n/**\n * Contains the text of the document. Document can be attached to several [[EditSession `EditSession`]]s.\n * At its core, `Document`s are just an array of strings, with each row in the document matching up to the array index.\n *\n * @class Document\n **/\n\nexport default class Document extends EventEmitter {\n    /**\n     *\n     * Creates a new `Document`. If `text` is included, the `Document` contains those strings; otherwise, it's empty.\n     * @param {String | Array} text The starting text\n     * @constructor\n     **/\n\n    constructor(textOrLines) {\n        super();\n        this.$lines = [\"\"];\n        this.$autoNewLine = \"\";\n        this.$newLineMode = \"auto\";\n\n        // There has to be one line at least in the document. If you pass an empty\n        // string to the insert function, nothing will happen. Workaround.\n        if (textOrLines.length === 0) {\n            this.$lines = [\"\"];\n        } else if (Array.isArray(textOrLines)) {\n            this.insertMergedLines({row: 0, column: 0}, textOrLines);\n        } else {\n            this.insert({row: 0, column:0}, textOrLines);\n        }\n    }\n\n   /**\n     * Replaces all the lines in the current `Document` with the value of `text`.\n     *\n     * @param {String} text The text to use\n     **/\n    setValue(text) {\n        var len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length));\n        this.insert({row: 0, column: 0}, text);\n    }\n\n    /**\n     * Returns all the lines in the document as a single string, joined by the new line character.\n     **/\n    getValue() {\n        return this.getAllLines().join(this.getNewLineCharacter());\n    }\n\n    /**\n     * Creates a new `Anchor` to define a floating point in the document.\n     * @param {Number} row The row number to use\n     * @param {Number} column The column number to use\n     *\n     **/\n    createAnchor(row, column) {\n        return new Anchor(this, row, column);\n    }\n\n    /**\n     * Splits a string of text on any newline (`\\n`) or carriage-return (`\\r`) characters.\n     *\n     * @method $split\n     * @param {String} text The text to work with\n     * @returns {String} A String array, with each index containing a piece of the original `text` string.\n     *\n     **/\n\n    $split(text) {\n            return text.split(/\\r\\n|\\r|\\n/);\n    }\n\n\n    $detectNewLine(text) {\n        var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        this.$autoNewLine = match ? match[1] : \"\\n\";\n        this._signal(\"changeNewLineMode\");\n    }\n\n    /**\n     * Returns the newline character that's being used, depending on the value of `newLineMode`.\n     * @returns {String} If `newLineMode == windows`, `\\r\\n` is returned.\n     *  If `newLineMode == unix`, `\\n` is returned.\n     *  If `newLineMode == auto`, the value of `autoNewLine` is returned.\n     *\n     **/\n    getNewLineCharacter() {\n        switch (this.$newLineMode) {\n            case \"windows\":\n                return \"\\r\\n\";\n            case \"unix\":\n                return \"\\n\";\n            default:\n                return this.$autoNewLine || \"\\n\";\n        }\n    }\n\n    /**\n     * [Sets the new line mode.]{: #Document.setNewLineMode.desc}\n     * @param {String} newLineMode [The newline mode to use; can be either `windows`, `unix`, or `auto`]{: #Document.setNewLineMode.param}\n     *\n     **/\n    setNewLineMode(newLineMode) {\n        if (this.$newLineMode === newLineMode)\n            return;\n\n        this.$newLineMode = newLineMode;\n        this._signal(\"changeNewLineMode\");\n    }\n\n    /**\n     * [Returns the type of newlines being used; either `windows`, `unix`, or `auto`]{: #Document.getNewLineMode}\n     * @returns {String}\n     **/\n    getNewLineMode() {\n        return this.$newLineMode;\n    }\n\n    /**\n     * Returns `true` if `text` is a newline character (either `\\r\\n`, `\\r`, or `\\n`).\n     * @param {String} text The text to check\n     *\n     **/\n    isNewLine(text) {\n        return (text === \"\\r\\n\" || text === \"\\r\" || text === \"\\n\");\n    }\n\n    /**\n     * Returns a verbatim copy of the given line as it is in the document\n     * @param {Number} row The row index to retrieve\n     *\n     **/\n    getLine(row) {\n        return this.$lines[row] || \"\";\n    }\n\n    /**\n     * Returns an array of strings of the rows between `firstRow` and `lastRow`. This function is inclusive of `lastRow`.\n     * @param {Number} firstRow The first row index to retrieve\n     * @param {Number} lastRow The final row index to retrieve\n     *\n     **/\n    getLines(firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n    }\n\n    /**\n     * Returns all lines in the document as string array.\n     **/\n    getAllLines() {\n        return this.getLines(0, this.getLength());\n    }\n\n    /**\n     * Returns the number of rows in the document.\n     **/\n    getLength() {\n        return this.$lines.length;\n    }\n\n    /**\n     * Returns all the text within `range` as a single string.\n     * @param {Range} range The range to work with.\n     *\n     * @returns {String}\n     **/\n    getTextRange(range) {\n        return this.getLinesForRange(range).join(this.getNewLineCharacter());\n    }\n\n    /**\n     * Returns all the text within `range` as an array of lines.\n     * @param {Range} range The range to work with.\n     *\n     * @returns {Array}\n     **/\n    getLinesForRange(range) {\n        var lines;\n        if (range.start.row === range.end.row) {\n            // Handle a single-line range.\n            lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n        } else {\n            // Handle a multi-line range.\n            lines = this.getLines(range.start.row, range.end.row);\n            lines[0] = (lines[0] || \"\").substring(range.start.column);\n            var l = lines.length - 1;\n            if (range.end.row - range.start.row === l)\n                lines[l] = lines[l].substring(0, range.end.column);\n        }\n        return lines;\n    }\n\n    // Deprecated methods retained for backwards compatibility.\n    insertLines(row, lines) {\n        console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\");\n        return this.insertFullLines(row, lines);\n    }\n\n    removeLines(firstRow, lastRow) {\n        console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\");\n        return this.removeFullLines(firstRow, lastRow);\n    }\n\n    insertNewLine(position) {\n        console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\");\n        return this.insertMergedLines(position, [\"\", \"\"]);\n    }\n\n    /**\n     * Inserts a block of `text` at the indicated `position`.\n     * @param {Object} position The position to start inserting at; it's an object that looks like `{ row: row, column: column}`\n     * @param {String} text A chunk of text to insert\n     * @returns {Object} The position ({row, column}) of the last line of `text`. If the length of `text` is 0, this function simply returns `position`.\n     *\n     **/\n    insert(position, text) {\n        // Only detect new lines if the document has no line break yet.\n        if (this.getLength() <= 1)\n            this.$detectNewLine(text);\n\n        return this.insertMergedLines(position, this.$split(text));\n    }\n\n    /**\n     * Inserts `text` into the `position` at the current row. This method also triggers the `\"change\"` event.\n     *\n     * This differs from the `insert` method in two ways:\n     *   1. This does NOT handle newline characters (single-line text only).\n     *   2. This is faster than the `insert` method for single-line text insertions.\n     *\n     * @param {Object} position The position to insert at; it's an object that looks like `{ row: row, column: column}`\n     * @param {String} text A chunk of text\n     * @returns {Object} Returns an object containing the final row and column, like this:\n     *     ```\n     *     {row: endRow, column: 0}\n     *     ```\n     **/\n    insertInLine(position, text) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = this.pos(position.row, position.column + text.length);\n\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: [text]\n        }, true);\n\n        return this.clonePos(end);\n    }\n\n    clippedPos(row, column) {\n        var length = this.getLength();\n        if (row === undefined) {\n            row = length;\n        } else if (row < 0) {\n            row = 0;\n        } else if (row >= length) {\n            row = length - 1;\n            column = undefined;\n        }\n        var line = this.getLine(row);\n        if (column === undefined)\n            column = line.length;\n        column = Math.min(Math.max(column, 0), line.length);\n        return {row: row, column: column};\n    }\n\n    clonePos(pos) {\n        return {row: pos.row, column: pos.column};\n    }\n\n    pos(row, column) {\n        return {row: row, column: column};\n    }\n\n    $clipPosition(position) {\n        var length = this.getLength();\n        if (position.row >= length) {\n            position.row = Math.max(0, length - 1);\n            position.column = this.getLine(length - 1).length;\n        } else {\n            position.row = Math.max(0, position.row);\n            position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);\n        }\n        return position;\n    }\n\n    /**\n     * Fires whenever the document changes.\n     *\n     * Several methods trigger different `\"change\"` events. Below is a list of each action type, followed by each property that's also available:\n     *\n     *  * `\"insert\"`\n     *    * `range`: the [[Range]] of the change within the document\n     *    * `lines`: the lines being added\n     *  * `\"remove\"`\n     *    * `range`: the [[Range]] of the change within the document\n     *    * `lines`: the lines being removed\n     *\n     * @event change\n     * @param {Object} e Contains at least one property called `\"action\"`. `\"action\"` indicates the action that triggered the change. Each action also has a set of additional properties.\n     *\n     **/\n\n    /**\n     * Inserts the elements in `lines` into the document as full lines (does not merge with existing line), starting at the row index given by `row`. This method also triggers the `\"change\"` event.\n     * @param {Number} row The index of the row to insert at\n     * @param {Array} lines An array of strings\n     * @returns {Object} Contains the final row and column, like this:\n     *   ```\n     *   {row: endRow, column: 0}\n     *   ```\n     *   If `lines` is empty, this function returns an object containing the current row, and column, like this:\n     *   ```\n     *   {row: row, column: 0}\n     *   ```\n     *\n     **/\n    insertFullLines(row, lines) {\n        // Clip to document.\n        // Allow one past the document end.\n        row = Math.min(Math.max(row, 0), this.getLength());\n\n        // Calculate insertion point.\n        var column = 0;\n        if (row < this.getLength()) {\n            // Insert before the specified row.\n            lines = lines.concat([\"\"]);\n            column = 0;\n        } else {\n            // Insert after the last row in the document.\n            lines = [\"\"].concat(lines);\n            row--;\n            column = this.$lines[row].length;\n        }\n\n        // Insert.\n        this.insertMergedLines({row: row, column: column}, lines);\n    }\n\n    /**\n     * Inserts the elements in `lines` into the document, starting at the position index given by `row`. This method also triggers the `\"change\"` event.\n     * @param {Number} row The index of the row to insert at\n     * @param {Array} lines An array of strings\n     * @returns {Object} Contains the final row and column, like this:\n     *   ```\n     *   {row: endRow, column: 0}\n     *   ```\n     *   If `lines` is empty, this function returns an object containing the current row, and column, like this:\n     *   ```\n     *   {row: row, column: 0}\n     *   ```\n     *\n     **/\n    insertMergedLines(position, lines) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = {\n            row: start.row + lines.length - 1,\n            column: (lines.length === 1 ? start.column : 0) + lines[lines.length - 1].length\n        };\n\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: lines\n        });\n\n        return this.clonePos(end);\n    }\n\n    /**\n     * Removes the `range` from the document.\n     * @param {Range} range A specified Range to remove\n     * @returns {Object} Returns the new `start` property of the range, which contains `startRow` and `startColumn`. If `range` is empty, this function returns the unmodified value of `range.start`.\n     *\n     **/\n    remove(range) {\n        var start = this.clippedPos(range.start.row, range.start.column);\n        var end = this.clippedPos(range.end.row, range.end.column);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        });\n        return this.clonePos(start);\n    }\n\n    /**\n     * Removes the specified columns from the `row`. This method also triggers a `\"change\"` event.\n     * @param {Number} row The row to remove from\n     * @param {Number} startColumn The column to start removing at\n     * @param {Number} endColumn The column to stop removing at\n     * @returns {Object} Returns an object containing `startRow` and `startColumn`, indicating the new row and column values.<br/>If `startColumn` is equal to `endColumn`, this function returns nothing.\n     *\n     **/\n    removeInLine(row, startColumn, endColumn) {\n        var start = this.clippedPos(row, startColumn);\n        var end = this.clippedPos(row, endColumn);\n\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        }, true);\n\n        return this.clonePos(start);\n    }\n\n    /**\n     * Removes a range of full lines. This method also triggers the `\"change\"` event.\n     * @param {Number} firstRow The first row to be removed\n     * @param {Number} lastRow The last row to be removed\n     * @returns {[String]} Returns all the removed lines.\n     *\n     **/\n    removeFullLines(firstRow, lastRow) {\n        // Clip to document.\n        firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);\n        lastRow  = Math.min(Math.max(0, lastRow ), this.getLength() - 1);\n\n        // Calculate deletion range.\n        // Delete the ending new line unless we're at the end of the document.\n        // If we're at the end of the document, delete the starting new line.\n        var deleteFirstNewLine = lastRow === this.getLength() - 1 && firstRow > 0;\n        var deleteLastNewLine  = lastRow  < this.getLength() - 1;\n        var startRow = ( deleteFirstNewLine ? firstRow - 1                  : firstRow                    );\n        var startCol = ( deleteFirstNewLine ? this.getLine(startRow).length : 0                           );\n        var endRow   = ( deleteLastNewLine  ? lastRow + 1                   : lastRow                     );\n        var endCol   = ( deleteLastNewLine  ? 0                             : this.getLine(endRow).length );\n        var range = new Range(startRow, startCol, endRow, endCol);\n\n        // Store delelted lines with bounding newlines ommitted (maintains previous behavior).\n        var deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n\n        this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: \"remove\",\n            lines: this.getLinesForRange(range)\n        });\n\n        // Return the deleted lines.\n        return deletedLines;\n    }\n\n    /**\n     * Removes the new line between `row` and the row immediately following it. This method also triggers the `\"change\"` event.\n     * @param {Number} row The row to check\n     *\n     **/\n    removeNewLine(row) {\n        if (row < this.getLength() - 1 && row >= 0) {\n            this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: \"remove\",\n                lines: [\"\", \"\"]\n            });\n        }\n    }\n\n    /**\n     * Replaces a range in the document with the new `text`.\n     * @param {Range} range A specified Range to replace\n     * @param {String} text The new text to use as a replacement\n     * @returns {Object} Returns an object containing the final row and column, like this:\n     *     {row: endRow, column: 0}\n     * If the text and range are empty, this function returns an object containing the current `range.start` value.\n     * If the text is the exact same as what currently exists, this function returns an object containing the current `range.end` value.\n     *\n     **/\n    replace(range, text) {\n        if (!(range instanceof Range))\n            range = Range.fromPoints(range.start, range.end);\n        if (text.length === 0 && range.isEmpty())\n            return range.start;\n\n        // Shortcut: If the text we want to insert is the same as it is already\n        // in the document, we don't have to replace anything.\n        if (text === this.getTextRange(range))\n            return range.end;\n\n        this.remove(range);\n        var end;\n        if (text) {\n            end = this.insert(range.start, text);\n        }\n        else {\n            end = range.start;\n        }\n\n        return end;\n    }\n\n    /**\n     * Applies all changes in `deltas` to the document.\n     * @param {Array} deltas An array of delta objects (can include \"insert\" and \"remove\" actions)\n     **/\n    applyDeltas(deltas) {\n        for (var i=0; i<deltas.length; i++) {\n            this.applyDelta(deltas[i]);\n        }\n    }\n\n    /**\n     * Reverts all changes in `deltas` from the document.\n     * @param {Array} deltas An array of delta objects (can include \"insert\" and \"remove\" actions)\n     **/\n    revertDeltas(deltas) {\n        for (var i=deltas.length-1; i>=0; i--) {\n            this.revertDelta(deltas[i]);\n        }\n    }\n\n    /**\n     * Applies `delta` to the document.\n     * @param {Object} delta A delta object (can include \"insert\" and \"remove\" actions)\n     **/\n    applyDelta(delta, doNotValidate) {\n        var isInsert = delta.action === \"insert\";\n        // An empty range is a NOOP.\n        if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]\n            : !Range.comparePoints(delta.start, delta.end)) {\n            return;\n        }\n\n        if (isInsert && delta.lines.length > 20000) {\n            this.$splitAndapplyLargeDelta(delta, 20000);\n        }\n        else {\n            applyDelta(this.$lines, delta, doNotValidate);\n            this._signal(\"change\", delta);\n        }\n    }\n\n    $splitAndapplyLargeDelta(delta, MAX) {\n        // Split large insert deltas. This is necessary because:\n        //    1. We need to support splicing delta lines into the document via $lines.splice.apply(...)\n        //    2. fn.apply() doesn't work for a large number of params. The smallest threshold is on chrome 40 ~42000.\n        // we use 20000 to leave some space for actual stack\n        //\n        // To Do: Ideally we'd be consistent and also split 'delete' deltas. We don't do this now, because delete\n        //        delta handling is too slow. If we make delete delta handling faster we can split all large deltas\n        //        as shown in https://gist.github.com/aldendaniels/8367109#file-document-snippet-js\n        //        If we do this, update validateDelta() to limit the number of lines in a delete delta.\n        var lines = delta.lines;\n        var l = lines.length - MAX + 1;\n        var row = delta.start.row;\n        var column = delta.start.column;\n        for (var from = 0, to = 0; from < l; from = to) {\n            to += MAX - 1;\n            var chunk = lines.slice(from, to);\n            chunk.push(\"\");\n            this.applyDelta({\n                start: this.pos(row + from, column),\n                end: this.pos(row + to, column = 0),\n                action: delta.action,\n                lines: chunk\n            }, true);\n        }\n        // Update remaining delta.\n        delta.lines = lines.slice(from);\n        delta.start.row = row + from;\n        delta.start.column = column;\n        this.applyDelta(delta, true);\n    }\n\n    /**\n     * Reverts `delta` from the document.\n     * @param {Object} delta A delta object (can include \"insert\" and \"remove\" actions)\n     **/\n    revertDelta(delta) {\n        this.applyDelta({\n            start: this.clonePos(delta.start),\n            end: this.clonePos(delta.end),\n            action: (delta.action === \"insert\" ? \"remove\" : \"insert\"),\n            lines: delta.lines.slice()\n        });\n    }\n\n    /**\n     * Converts an index position in a document to a `{row, column}` object.\n     *\n     * Index refers to the \"absolute position\" of a character in the document. For example:\n     *\n     * ```javascript\n     * var x = 0; // 10 characters, plus one for newline\n     * var y = -1;\n     * ```\n     *\n     * Here, `y` is an index 15: 11 characters for the first row, and 5 characters until `y` in the second.\n     *\n     * @param {Number} index An index to convert\n     * @param {Number} startRow=0 The row from which to start the conversion\n     * @returns {Object} A `{row, column}` object of the `index` position\n     */\n    indexToPosition(index, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        for (var i = startRow || 0, l = lines.length; i < l; i++) {\n            index -= lines[i].length + newlineLength;\n            if (index < 0)\n                return {row: i, column: index + lines[i].length + newlineLength};\n        }\n        return {row: l-1, column: index + lines[l-1].length + newlineLength};\n    }\n\n    /**\n     * Converts the `{row, column}` position in a document to the character's index.\n     *\n     * Index refers to the \"absolute position\" of a character in the document. For example:\n     *\n     * ```javascript\n     * var x = 0; // 10 characters, plus one for newline\n     * var y = -1;\n     * ```\n     *\n     * Here, `y` is an index 15: 11 characters for the first row, and 5 characters until `y` in the second.\n     *\n     * @param {Object} pos The `{row, column}` to convert\n     * @param {Number} startRow=0 The row from which to start the conversion\n     * @returns {Number} The index position in the document\n     */\n    positionToIndex(pos, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        var index = 0;\n        var row = Math.min(pos.row, lines.length);\n        for (var i = startRow || 0; i < row; ++i)\n            index += lines[i].length + newlineLength;\n\n        return index + pos.column;\n    }\n\n}","export default {\n    dialect: \"O\"\n};","import axios from \"axios\";\n\n// eslint-disable-next-line\nconst globals = self || window;\n\nexport default class Fetcher {\n\n    constructor() {\n        this.$authorization = null;\n        this.onSuccess = this.onSuccess.bind(this);\n        this.prepareConfig = this.prepareConfig.bind(this);\n        this.collectHeaders = this.collectHeaders.bind(this);\n    }\n\n    prepareConfig(url) {\n        if (url[0] !== \"/\" && url[0] !== \".\") {\n            let headers = { \"Access-Control-Allow-Origin\": \"*\" };\n            if(this.$authorization !== null)\n                headers =  { ...headers, \"X-Authorization\": this.$authorization };\n            return { withCredentials: true, headers: headers};\n        } else\n            return {};\n    }\n\n    postJSON(url, params, success, errored) {\n        this.postTEXT(url, params, text => {\n            const json = typeof(text)===typeof('') ? JSON.parse(text) : text; // already transformed by axios\n            success(json);\n        }, errored);\n    }\n\n    postTEXT(url, params, success, errored) {\n        errored = errored || console.log;\n        const config = this.prepareConfig(url);\n        axios.post(url, params, config)\n            .then(resp => this.onSuccess(resp, url, success, errored))\n            .catch(errored);\n    }\n\n\n    getJSON(url, params, success, errored) {\n        this.getTEXT(url, params, text => {\n            const json = typeof(text)===typeof('') ? JSON.parse(text) : text; // already transformed by axios\n            success(json);\n        }, errored);\n    }\n\n    getTEXT(url, params, success, errored) {\n        errored = errored || console.log;\n        let config = this.prepareConfig(url);\n        if(params)\n            config = { ...config, params: params};\n        axios.get(url, config)\n           .then(resp => this.onSuccess(resp, url, success, errored))\n           .catch(errored);\n    }\n\n    onSuccess(response, url, success, errored) {\n        if (response.status === 200) {\n            this.collectHeaders(response, url);\n            success(response.data);\n        } else\n            errored(\"Failed to load \" + url + \", error: \" + response.status);\n    }\n\n    collectHeaders(response, url) {\n        // only read headers from server\n        if (url[0] === \"/\" || url[0] === \".\")\n            this.$authorization = response.headers[\"X-Authorization\"] || null;\n    }\n\n    clearModuleContext(projectId, success, errored) {\n        const args = [ {name:\"dbId\", value: projectId}];\n        const params = { params: JSON.stringify(args) };\n        axios.get('/ws/run/clearModuleContext', { params: params })\n            .then(resp => {\n                const response = resp.data;\n                if (response.error)\n                    ; // TODO something\n                else if(response.data === -1)\n                    alert(\"Server is not running!\");\n                else if(success)\n                    success(response.data);\n            })\n            .catch(error => errored ? errored(error) : {} );\n    }\n\n    fetchModulePort(projectId, action, success, errored) {\n        const args = [ {name:\"dbId\", value: projectId}, {name:\"action\", type: \"Text\", value: action} ];\n        const params = { params: JSON.stringify(args) };\n        axios.get('/ws/run/fetchModulePort', { params: params })\n            .then(resp => {\n                const response = resp.data;\n                if (response.error)\n                    ; // TODO something\n                else if(response.data === -1)\n                    alert(\"Server is not running!\");\n                else\n                    success(response.data);\n            })\n            .catch(error => errored(error));\n    }\n\n    fetchModuleURL(projectId, action, success, errored) {\n        this.fetchModulePort(projectId, action, port => {\n            const href = globals.location.protocol +\n                \"//\" + globals.location.hostname +\n                \":\" + port + \"/\";\n            success(href);\n        }, errored);\n    }\n\n}\n\nFetcher.instance = new Fetcher(); // singleton needed to register $authorization across calls\n","import Runner from \"./Runner\";\n\n// eslint-disable-next-line\nconst globals = self || window;\nconst prompto = globals.prompto;\n\nexport default class LocalInterpreter extends Runner {\n\n    runMethod(repo, methodRef, callback) {\n        try {\n            prompto.runtime.Interpreter.interpret(repo.projectContext, methodRef.name, \"\");\n        } finally {\n            callback();\n        }\n    }\n\n    runTest(repo, testRef, callback) {\n        const store = prompto.store.$DataStore.instance;\n        prompto.store.$DataStore.instance = new prompto.memstore.MemStore();\n        try {\n            prompto.runtime.Interpreter.interpretTest(repo.projectContext, testRef.name);\n        } finally {\n            prompto.store.$DataStore.instance = store;\n            callback();\n        }\n    }\n\n}\n","export default class Runner {\n\n    runMethod(projectId, repo, methodRef, callback) {\n        throw new Error(\"Unsupported!\");\n    }\n\n    runTest(projectId, repo, testRef, callback) {\n        throw new Error(\"Unsupported!\");\n    }\n\n}\n\n\n\n\n\n","import Mirror from '../ace/Mirror';\nimport Repository from '../code/Repository';\nimport Defaults from '../code/Defaults';\nimport Fetcher from '../utils/Fetcher';\nimport LocalInterpreter from \"../runner/LocalInterpreter\";\nimport {convertObjectToDocument} from \"../code/CodeUtils\";\n\n// eslint-disable-next-line\nconst globals = self || window;\n\nexport default class PromptoWorker extends Mirror {\n\n    constructor(sender) {\n        super(sender);\n        this.$projectId = null;\n        this.$project = null;\n        this.$dialect = Defaults.dialect;\n        this.$value = \"\"; // the last value received\n        this.$repo = new Repository();\n        this.$loading = {};\n        this.$selected = null;\n        this.onInit();\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    onInit() {\n        this.markLoading(\"Project\");\n        // fake 'library' to ensure libraries are published only once dependencies are loaded\n        this.markLoading(\"%Description%\");\n        this.loadCore();\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    onUpdate() {\n        const value = this.doc.getValue();\n        let problems = this.handleSetContent(value);\n        if (problems == null)\n            problems = this.handleEditContent(value);\n        this.$value = value;\n        // changing the below requires evolving PromptoChangeManager\n        this.sender.emit(\"annotate\", problems);\n    }\n\n    progress(text) {\n        this.sender.emit(\"progressed\", text);\n    }\n\n    loadCore() {\n        this.markLoading(\"Core\");\n        this.progress( \"Fetching Core code\");\n        Fetcher.instance.getTEXT(\"/prompto/prompto.pec\", null, text => {\n            this.progress(\"Loading Core code\");\n            this.$repo.registerLibraryCode(text, \"E\");\n            this.markLoaded(\"Core\");\n        });\n    }\n\n    setProject(projectId, loadDependencies) {\n        this.$projectId = projectId;\n        this.unpublishProject();\n        this.loadProject(loadDependencies);\n    }\n\n    setContent(content, clearValue) {\n        this.$selected = content;\n        if(clearValue) {\n            this.$value = null; // next update will be setting the value\n            this.$repo.reset();\n        }\n    }\n\n    handleSetContent(value) {\n        if (this.$value)\n            return null;\n        if (this.$selected && value.length) {\n            const errorListener = new globals.AnnotatingErrorListener();\n            this.$repo.handleSetContent(value, this.$dialect, errorListener);\n            return errorListener.problems;\n        } else\n            return null;\n    }\n\n    handleEditContent(value) {\n        if(value !== this.$value) {\n            const errorListener = new globals.AnnotatingErrorListener();\n            const delta = this.$repo.handleEditContent(value, this.$dialect, errorListener, this.$selected);\n            if (delta) {\n                const data = convertObjectToDocument(delta);\n                this.sender.emit(\"catalogUpdated\", data);\n            } else if(this.$selected)\n                this.sender.emit(\"bodyEdited\", this.$selected);\n            return errorListener.problems;\n        } else\n            return [];\n    }\n\n    setDialect(dialect) {\n        const old = this.$dialect;\n        this.$dialect = dialect;\n        if(old && dialect!==old) {\n            const value = this.doc.getValue();\n            if(value) {\n                // remember value since it does not result from an edit\n                this.$value = this.$repo.translate(value, old, dialect);\n                this.sender.emit(\"value\", this.$value);\n            }\n        }\n    }\n\n    getContentBody(content) {\n        const callbackId = arguments[arguments.length - 1]; // callbackId is added by ACE\n        const body = content ? this.$repo.getContentBody(content, this.$dialect) : \"\";\n        this.sender.callback(body, callbackId);\n    }\n\n    getEditedContents(contents) {\n        const callbackId = arguments[arguments.length - 1]; // callbackId is added by ACE\n        const edited = this.$repo.getEditedDeclarations(contents);\n        this.sender.callback(edited, callbackId);\n    }\n\n    locateSection(breakpoint) {\n        const callbackId = arguments[arguments.length - 1]; // callbackId is added by ACE\n        const section = this.$repo.locateSection(breakpoint);\n        this.sender.callback(section, callbackId);\n    }\n\n    locateSections(breakpoints) {\n        const callbackId = arguments[arguments.length - 1]; // callbackId is added by ACE\n        const sections = breakpoints.map(brkpt => this.$repo.locateSection(brkpt));\n        this.sender.callback(sections, callbackId);\n    }\n\n    createBreakpointAtLine(line) {\n        const callbackId = arguments[arguments.length - 1]; // callbackId is added by ACE\n        const brkpt = this.$selected ? this.$repo.createBreakpointAtLine(this.$selected, line, this.$dialect) : null;\n        this.sender.callback(brkpt, callbackId);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    contentForStackFrame(stackFrame) {\n        const callbackId = arguments[arguments.length - 1]; // callbackId is added by ACE\n        const content = this.$repo.contentForStackFrame(stackFrame);\n        this.sender.callback(content, callbackId);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    destroyContent(content) {\n        this.$value = \"\";\n        const delta = this.$repo.handleDestroyed(content);\n        if(delta) {\n            const data = convertObjectToDocument(delta.getContent());\n            this.sender.emit(\"catalogUpdated\", data);\n        }\n        this.sender.emit(\"value\", this.$value);\n    }\n\n    loadProject(loadDependencies) {\n        this.progress(\"Fetching project description\");\n        PromptoWorker.fetchProjectDescription(this.$projectId, true, response => {\n            this.progress( \"Fetching project description complete\");\n            if (response.error) {\n                this.handleError(response.error);\n                this.markFailed(\"%Description%\");\n            } else {\n                this.projectLoaded(response.data, loadDependencies);\n                this.markLoaded(\"%Description%\");\n            }\n        });\n    }\n\n    projectLoaded(data, loadDependencies) {\n        this.$project = data.value;\n        if (loadDependencies)\n            this.loadDependencies();\n        // noinspection JSUnresolvedVariable\n        if (this.$project.stubResource) try {\n            // resource location is absolute\n            globals.importScripts(\"/stub?moduleId=\" + this.$project.dbId + \"&resourceName=\" + this.$project.stubResource);\n        } catch(e) {\n            // TODO something\n            const trace = e.stack;\n            console.error(trace);\n        }\n        this.progress(\"Fetching project code\");\n        PromptoWorker.fetchModuleDeclarations(this.$projectId, response => {\n            if (response.error) {\n                this.handleError(response.error);\n                this.markFailed(\"Project\");\n            } else {\n                this.progress( \"Parsing project code\");\n                const cursor = response.data.value;\n                this.$repo.registerProjectDeclarations(this.$projectId, cursor.items, this.progress.bind(this));\n                this.markLoaded(\"Project\");\n            }\n        });\n    }\n\n    loadDependencies() {\n        if(this.$project.dependencies) {\n            this.$project.dependencies.value\n                .filter(dep => dep!=null)\n                .map(dep=>this.loadDependency(dep.value || dep), this);\n        }\n    }\n\n\n    loadDependency(dependency) {\n        this.markLoading(dependency.name);\n        PromptoWorker.fetchModuleDescription(dependency.name, dependency.version, response => {\n            if(response.error) {\n                this.handleError(response.error);\n                this.markFailed(dependency.name);\n            } else {\n                const library = response.data.value;\n                // noinspection JSUnresolvedVariable\n                if(library.stubResource) {\n                    try {\n                        // resource location is absolute\n                        globals.importScripts(\"/stub?moduleId=\" + library.dbId + \"&resourceName=\" + library.stubResource);\n                    } catch(e) {\n                        // TODO something\n                        const trace = e.stack;\n                        console.error(trace);\n                    }\n                }\n                this.progress( \"Fetching \" + dependency.name + \" code\");\n                PromptoWorker.fetchModuleDeclarations(library.dbId, response => {\n                    if (response.error) {\n                        this.handleError(response.error);\n                        this.markFailed(dependency.name);\n                    } else {\n                        this.progress( \"Parsing \" + dependency.name + \" code\");\n                        const cursor = response.data.value;\n                        this.$repo.registerLibraryDeclarations(cursor.items);\n                        this.markLoaded(dependency.name);\n                    }\n                });\n            }\n        });\n    }\n\n    handleError(error) {\n        // TODO\n    }\n\n    // TODO reconnect this stuff\n    // noinspection JSUnusedGlobalSymbols\n    dependenciesUpdated() {\n        this.$repo.clearLibrariesContext();\n        this.markLoading(\"Project\");\n        // fake 'library' to ensure libraries are published only once dependencies are loaded\n        this.markLoading(\"%Description%\");\n        this.loadCore();\n        this.loadProject(true);\n    }\n\n    static fetchProjectDescription(projectId, register, success) {\n        const params = [ {name:\"dbId\", value:projectId.toString()}, {name:\"register\", type:\"Boolean\", value:register}];\n        const url = '/ws/run/fetchModuleDescription';\n        Fetcher.instance.getJSON(url, { params: JSON.stringify(params) }, success);\n    }\n\n    static fetchModuleDescription(name, version, success) {\n        const params = [ {name:\"name\", type:\"Text\", value:name}, {name:\"version\", type:version.type, value:version.value}, {name:\"register\", type:\"Boolean\", value:false} ];\n        const url = '/ws/run/fetchModuleDescription';\n        Fetcher.instance.getJSON(url, { params: JSON.stringify(params) }, success);\n    }\n\n    static fetchModuleDeclarations(moduleId, success) {\n        const params = [ {name:\"dbId\", value:moduleId.toString()}];\n        const url = '/ws/run/fetchModuleDeclarations';\n        Fetcher.instance.getJSON(url, { params: JSON.stringify(params) }, success);\n    }\n\n\n    publishLibraries(complete) {\n        const catalog = this.$repo.publishLibraries();\n        this.sender.emit(\"catalogLoaded\", [ catalog, complete ]);\n    }\n\n    publishProject(complete) {\n        const catalog = this.$repo.publishProject();\n        this.sender.emit(\"catalogLoaded\", [ catalog, complete ]);\n    }\n\n    unpublishProject() {\n        const catalog = this.$repo.unpublishProject();\n        this.sender.emit(\"catalogLoaded\", [ catalog, false ]);\n    }\n\n    markLoading(name) {\n        this.$loading[name] = true;\n    }\n\n    markFailed (name) {\n        if (name !== \"%Description%\")\n            this.progress(\"Loading \" + name + \" failed\");\n        delete this.$loading[name];\n        this.checkLoadingComplete(name);\n    }\n\n    markLoaded (name) {\n        if(name !== \"%Description%\")\n            this.progress( \"Loading \" + name + \" complete\");\n        delete this.$loading[name];\n        this.checkLoadingComplete(name);\n    }\n\n    checkLoadingComplete (name) {\n        const complete = Object.keys(this.$loading).length === 0;\n        // is this the Project ?\n        if(name===\"Project\")\n            this.publishProject(complete);\n        // is this the last library ?\n        else if (Object.keys(this.$loading).length === 1 && \"Project\" in this.$loading)\n            this.publishLibraries(complete);\n        // is this the last loading\n        else if (complete)\n            this.publishLibraries(complete);\n    }\n\n    markChangesCommitted() {\n        PromptoWorker.fetchModuleDeclarations(this.$projectId, response => {\n            if (response.error)\n                this.handleError(response.error);\n            else {\n                const cursor = response.data.value;\n                this.$repo.markChangesCommitted(cursor.items);\n                this.$repo.clearDeleted();\n             }\n        });\n    }\n\n    runMethod(methodRef) {\n        const callbackId = arguments[arguments.length - 1]; // callbackId is added by ACE\n        const oldLog = console.log;\n        console.log = this.progress.bind(this);\n        const runner = new LocalInterpreter();\n        try {\n            runner.runMethod(this.$repo, methodRef, () => this.sender.callback(null, callbackId));\n        } finally {\n            console.log = oldLog;\n        }\n\n    }\n\n    runTest(testRef) {\n        const callbackId = arguments[arguments.length - 1]; // callbackId is added by ACE\n        const oldLog = console.log;\n        console.log = this.progress.bind(this);\n        const runner = new LocalInterpreter();\n        try {\n            runner.runTest(this.$repo, testRef, () => this.sender.callback(null, callbackId));\n        } finally {\n            console.log = oldLog;\n        }\n    }\n\n\n}","import Document from './Document';\nimport { delayedCall } from './lang';\n\nexport default class Mirror {\n    \n    constructor(sender) {\n        this.sender = sender;\n        this.$timeout = 0;\n        this.doc = new Document(\"\");\n        this.deferredUpdate = delayedCall(this.onUpdate.bind(this));\n        sender.on(\"change\", this.processChange.bind(this));\n        sender.on(\"changes\", this.processChanges.bind(this));\n    }\n\n    processChanges(data) {\n        var changes = data.data;\n        for (var i = 0; i < changes.length; i ++) {\n            this.applyChange(changes[i]);\n        }\n        return this.invokeUpdate();\n    }\n\n    processChange(data) {\n        var change = data.data;\n        this.applyChange(change);\n        return this.invokeUpdate();\n    }\n\n    invokeUpdate() {\n        if (this.$timeout)\n            return this.deferredUpdate.schedule(this.$timeout);\n        else\n            this.onUpdate();\n    }\n\n    applyChange(data) {\n        var doc = this.doc;\n        if (data[0].start) {\n            doc.applyDeltas(data);\n        } else {\n            for (var i = 0; i < data.length; i += 2) {\n                var d = Array.isArray(data[i+1]) ?\n                    {action: \"insert\", start: data[i], lines: data[i+1]}\n                    : {action: \"remove\", start: data[i], end: data[i+1]};\n                doc.applyDelta(d, true);\n            }\n        }\n    }\n\n\n    setTimeout(timeout) {\n        this.$timeout = timeout;\n    }\n\n    setValue(value) {\n        this.doc.setValue(value);\n        this.deferredUpdate.schedule(this.$timeout);\n    }\n\n    getValue(callbackId) {\n        this.sender.callback(this.doc.getValue(), callbackId);\n    }\n\n    onUpdate() {\n        // abstract method\n    }\n\n    isPending() {\n        return this.deferredUpdate.isPending();\n    }\n\n}","/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\nexport function last(a) {\n    return a[a.length - 1];\n}\n\nexport function stringReverse(string) {\n    return string.split(\"\").reverse().join(\"\");\n}\n\nexport function stringRepeat(string, count) {\n    var result = '';\n    while (count > 0) {\n        if (count & 1)\n            result += string;\n\n        if ((count >>= 1) !== 0)\n            string += string;\n    }\n    return result;\n}\n\nvar trimBeginRegexp = /^\\s\\s*/;\nvar trimEndRegexp = /\\s\\s*$/;\n\nexport function stringTrimLeft(string) {\n    return string.replace(trimBeginRegexp, '');\n}\n\nexport function stringTrimRight(string) {\n    return string.replace(trimEndRegexp, '');\n}\n\nexport function copyObject(obj) {\n    var copy = {};\n    for (var key in obj) {\n        copy[key] = obj[key];\n    }\n    return copy;\n}\n\nexport function copyArray(array){\n    var copy = [];\n    for (var i=0, l=array.length; i<l; i++) {\n        if (array[i] && typeof array[i] == \"object\")\n            copy[i] = this.copyObject(array[i]);\n        else\n            copy[i] = array[i];\n    }\n    return copy;\n}\n\nexport function deepCopy(obj) {\n    if (typeof obj !== \"object\" || !obj)\n        return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n        copy = [];\n        for (var key = 0; key < obj.length; key++) {\n            copy[key] = deepCopy(obj[key]);\n        }\n        return copy;\n    }\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\")\n        return obj;\n\n    copy = {};\n    for (key in obj)\n        copy[key] = deepCopy(obj[key]);\n    return copy;\n}\n\nexport function arrayToMap(arr) {\n    var map = {};\n    for (var i=0; i<arr.length; i++) {\n        map[arr[i]] = 1;\n    }\n    return map;\n}\n\nexport function createMap(props) {\n    var map = Object.create(null);\n    for (var i in props) {\n        map[i] = props[i];\n    }\n    return map;\n}\n\n/*\n * splice out of 'array' anything that === 'value'\n */\nexport function arrayRemove(array, value) {\n    for (var i = 0; i <= array.length; i++) {\n        if (value === array[i]) {\n            array.splice(i, 1);\n        }\n    }\n}\n\nexport function escapeRegExp(str) {\n    // eslint-disable-next-line\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n}\n\nexport function escapeHTML(str) {\n    return (\"\" + str).replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\n}\n\nexport function getMatchOffsets(string, regExp) {\n    var matches = [];\n\n    string.replace(regExp, function(str) {\n        matches.push({\n            offset: arguments[arguments.length-2],\n            length: str.length\n        });\n    });\n    return matches;\n}\n\n/* deprecated */\nexport function deferredCall(fcn) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var deferred = function(timeout) {\n        deferred.cancel();\n        timer = setTimeout(callback, timeout || 0);\n        return deferred;\n    };\n\n    deferred.schedule = deferred;\n\n    deferred.call = function() {\n        this.cancel();\n        fcn();\n        return deferred;\n    };\n\n    deferred.cancel = function() {\n        clearTimeout(timer);\n        timer = null;\n        return deferred;\n    };\n\n    deferred.isPending = function() {\n        return timer;\n    };\n\n    return deferred;\n}\n\n\nexport function delayedCall(fcn, defaultTimeout) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var _self = function(timeout) {\n        if (timer == null)\n            timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n\n    _self.delay = function(timeout) {\n        timer && clearTimeout(timer);\n        timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.schedule = _self;\n\n    _self.call = function() {\n        this.cancel();\n        fcn();\n    };\n\n    _self.cancel = function() {\n        timer && clearTimeout(timer);\n        timer = null;\n    };\n\n    _self.isPending = function() {\n        return timer;\n    };\n\n    return _self;\n}","import './Globals';\nimport Sender from '../ace/Sender';\nimport PromptoWorker from './PromptoWorker';\n\nvar sender = new Sender();\nvar worker = new PromptoWorker(sender);\n\n// eslint-disable-next-line\nconst globals = self;\n\nonmessage = function(e) {\n    var msg = e.data;\n    if (msg.event && sender) {\n        sender._signal(msg.event, msg.data);\n    } else if (msg.command) {\n        if (worker[msg.command])\n            worker[msg.command].apply(worker, msg.args);\n        else if (globals[msg.command])\n            globals[msg.command].apply(globals, msg.args);\n        else\n            throw new Error(\"Unknown command: \" + msg.command);\n    } else if (msg.init) {\n        // console.log(\"init\");\n    }\n};\n","import EventEmitter from './EventEmitter';\n\nexport default class Sender extends EventEmitter {\n\n    callback (data, callbackId) {\n        postMessage({\n            type: \"call\",\n            id: callbackId,\n            data: data\n        });\n    }\n\n    emit(name, data) {\n        postMessage({\n            type: \"event\",\n            name: name,\n            data: data\n        });\n    }\n}\n"],"sourceRoot":""}